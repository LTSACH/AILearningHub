<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification - Oxford Pets | AI Learning Hub</title>
    
    <!-- Load shared components from centralized library -->
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/themes/default.css">
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/components/header.css">
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/components/hero.css">
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/components/comparison.css">
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/components/theme-selector.css">
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/components/language-switcher.css">
    <link rel="stylesheet" href="https://ltsach.github.io/AILearningHub/ai-report-components/css/components/pipeline.css">
    
    <style>
        /* Custom styles for this page */
        
        .models-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--ai-spacing-lg);
            margin: var(--ai-spacing-xl) 0;
        }
        
        .model-card {
            background: var(--ai-bg);
            border: 1px solid var(--ai-border);
            border-radius: var(--ai-radius-lg);
            padding: var(--ai-spacing-lg);
            transition: all var(--ai-transition-normal);
            text-decoration: none;
            color: inherit;
            display: block;
        }
        
        .model-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--ai-shadow-lg);
            border-color: var(--ai-primary);
        }
        
        .model-icon {
            font-size: 2.5rem;
            margin-bottom: var(--ai-spacing-md);
            text-align: center;
        }
        
        .model-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--ai-spacing-sm);
            margin: var(--ai-spacing-md) 0;
        }
        
        .model-metric {
            background: var(--ai-bg-light);
            padding: var(--ai-spacing-sm);
            border-radius: var(--ai-radius-sm);
            text-align: center;
        }
        
        .model-metric-label {
            font-size: var(--ai-font-size-xs);
            color: var(--ai-text-light);
            margin-bottom: var(--ai-spacing-xs);
        }
        
        .model-metric-value {
            font-size: var(--ai-font-size-lg);
            font-weight: var(--ai-font-weight-bold);
            color: var(--ai-primary);
        }
        
        .model-badges {
            display: flex;
            gap: var(--ai-spacing-xs);
            flex-wrap: wrap;
            margin-top: var(--ai-spacing-md);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div id="ai-header"></div>

    <!-- Language Switcher (Top-right) -->
    <div id="language-switcher" class="ai-language-switcher fixed"></div>

    <div class="ai-container">
        <!-- Hero Section -->
        <div id="ai-hero"></div>
        <!-- Pipeline Section -->
        <section class="ai-section">
            <h2 class="ai-heading-2" data-en="üîÑ Pipeline" data-vi="üîÑ Quy Tr√¨nh">üîÑ Pipeline</h2>
            <p class="ai-text-light" style="font-size: var(--ai-font-size-lg); margin-bottom: 2rem;" 
               data-en="Computer Vision classification pipeline with CNN architectures"
               data-vi="Quy tr√¨nh ph√¢n lo·∫°i th·ªã gi√°c m√°y t√≠nh v·ªõi ki·∫øn tr√∫c CNN">
                Computer Vision classification pipeline with CNN architectures
            </p>
            
            <!-- Pipeline Tabs -->
            <div class="pipeline-section">
                <!-- Tabs -->
                <div class="pipeline-tabs">
                    <button class="pipeline-tab-btn active" onclick="switchPipelineTab('pipeline')">
                        üîÑ Pipeline
                    </button>
                    <button class="pipeline-tab-btn" onclick="switchPipelineTab('tutorials')">
                        üìö Tutorials
                    </button>
                    <button class="pipeline-tab-btn" onclick="switchPipelineTab('code')">
                        üíª Code
                    </button>
                    <button class="pipeline-tab-btn" onclick="switchPipelineTab('colab')">
                        üöÄ Colab
                    </button>
                </div>
                
                <!-- Tab 1: Pipeline (default) -->
                <div id="pipeline-tab" class="pipeline-tab-content active">
                    <div class="pipeline-flow">
                        <div class="step step-fixed" onclick="switchPipelineDetailTab('input')">
                            <div class="step-icon">üñºÔ∏è</div>
                            <div class="step-title" data-en="Image Input" data-vi="ƒê·∫ßu V√†o ·∫¢nh">Image Input</div>
                            <div class="step-detail" data-en="224√ó224 RGB images" data-vi="·∫¢nh RGB 224√ó224">224√ó224 RGB images</div>
                        </div>
                        
                        <div class="arrow">‚Üí</div>
                        
                        <div class="step step-fixed" onclick="switchPipelineDetailTab('preprocessing')">
                            <div class="step-icon">üîß</div>
                            <div class="step-title" data-en="Preprocessing" data-vi="Ti·ªÅn X·ª≠ L√Ω">Preprocessing</div>
                            <div class="step-badge" data-en="Fixed" data-vi="C·ªë ƒê·ªãnh">Fixed</div>
                            <div class="step-detail" data-en="Normalize, Resize" data-vi="Chu·∫©n h√≥a, Thay ƒë·ªïi k√≠ch th∆∞·ªõc">Normalize, Resize</div>
                        </div>
                        
                        <div class="arrow">‚Üí</div>
                        
                        <div class="step step-interactive" onclick="switchPipelineDetailTab('cnn-model')">
                            <div class="step-icon">üß†</div>
                            <div class="step-title" data-en="CNN Model" data-vi="M√¥ H√¨nh CNN">CNN Model</div>
                            <div class="step-badge" data-en="Choose Below" data-vi="Ch·ªçn B√™n D∆∞·ªõi">Choose Below</div>
                            <div class="step-detail" data-en="ResNet50, EfficientNet, MobileNet..." data-vi="ResNet50, EfficientNet, MobileNet...">ResNet50, EfficientNet, MobileNet...</div>
                        </div>
                        
                        <div class="arrow">‚Üí</div>
                        
                        <div class="step step-fixed" onclick="switchPipelineDetailTab('classifier-head')">
                            <div class="step-icon">üéØ</div>
                            <div class="step-title" data-en="Classifier Head" data-vi="ƒê·∫ßu Ph√¢n Lo·∫°i">Classifier Head</div>
                            <div class="step-badge" data-en="Adapted" data-vi="ƒêi·ªÅu Ch·ªânh">Adapted</div>
                            <div class="step-detail" data-en="1000 ‚Üí 37 classes" data-vi="1000 ‚Üí 37 l·ªõp">1000 ‚Üí 37 classes</div>
                        </div>
                        
                        <div class="arrow">‚Üí</div>
                        
                        <div class="step step-result" onclick="switchPipelineDetailTab('results')">
                            <div class="step-icon">‚ú®</div>
                            <div class="step-title" data-en="Classification Results" data-vi="K·∫øt Qu·∫£ Ph√¢n Lo·∫°i">Classification Results</div>
                            <div class="step-detail" data-en="37 breed predictions" data-vi="D·ª± ƒëo√°n 37 gi·ªëng">37 breed predictions</div>
                        </div>
                    </div>
                    
                    <!-- Pipeline Detail Tabs -->
                    <div class="pipeline-detail-tabs">
                        <div class="pipeline-detail-tab-buttons">
                            <button class="pipeline-detail-tab-btn active" onclick="switchPipelineDetailTab('input')">
                                üñºÔ∏è Input Image
                            </button>
                            <button class="pipeline-detail-tab-btn" onclick="switchPipelineDetailTab('preprocessing')">
                                üîß Preprocessing
                            </button>
                            <button class="pipeline-detail-tab-btn" onclick="switchPipelineDetailTab('cnn-model')">
                                üß† CNN Model
                            </button>
                            <button class="pipeline-detail-tab-btn" onclick="switchPipelineDetailTab('classifier-head')">
                                üéØ Classifier Head
                            </button>
                            <button class="pipeline-detail-tab-btn" onclick="switchPipelineDetailTab('results')">
                                ‚ú® Classification Results
                            </button>
                        </div>
                        
                        <!-- Input Image Tab -->
                        <div id="input-detail" class="pipeline-detail-tab-content active">
                            <h3 data-en="üñºÔ∏è Input Image Processing" data-vi="üñºÔ∏è X·ª≠ L√Ω ·∫¢nh ƒê·∫ßu V√†o">üñºÔ∏è Input Image Processing</h3>
                            <div class="detail-content">
                                <div class="detail-explanation">
                                    <h4 data-en="What happens here?" data-vi="ƒêi·ªÅu g√¨ x·∫£y ra ·ªü ƒë√¢y?">What happens here?</h4>
                                    <p data-en="Raw images from the Oxford Pets dataset are loaded and prepared for the CNN model. Each image is resized to 224√ó224 pixels to match the input requirements of pre-trained models."
                                       data-vi="·∫¢nh th√¥ t·ª´ t·∫≠p d·ªØ li·ªáu Oxford Pets ƒë∆∞·ª£c t·∫£i v√† chu·∫©n b·ªã cho m√¥ h√¨nh CNN. M·ªói ·∫£nh ƒë∆∞·ª£c thay ƒë·ªïi k√≠ch th∆∞·ªõc th√†nh 224√ó224 pixel ƒë·ªÉ ph√π h·ª£p v·ªõi y√™u c·∫ßu ƒë·∫ßu v√†o c·ªßa c√°c m√¥ h√¨nh ƒë√£ hu·∫•n luy·ªán.">
                                        Raw images from the Oxford Pets dataset are loaded and prepared for the CNN model. Each image is resized to 224√ó224 pixels to match the input requirements of pre-trained models.
                                    </p>
                                </div>
                                <div class="detail-code">
                                    <h4 data-en="Code Example" data-vi="V√≠ D·ª• M√£">Code Example</h4>
                                    <pre><code>import torch
from torchvision import transforms
from PIL import Image

# Load image
image = Image.open('path/to/image.jpg')

# Define transforms for input
transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.ToTensor()
])

# Apply transforms
input_tensor = transform(image)
print(f"Input shape: {input_tensor.shape}")  # [3, 224, 224]</code></pre>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Preprocessing Tab -->
                        <div id="preprocessing-detail" class="pipeline-detail-tab-content">
                            <h3 data-en="üîß Image Preprocessing" data-vi="üîß Ti·ªÅn X·ª≠ L√Ω ·∫¢nh">üîß Image Preprocessing</h3>
                            <div class="detail-content">
                                <div class="detail-explanation">
                                    <h4 data-en="Normalization & Augmentation" data-vi="Chu·∫©n H√≥a & TƒÉng C∆∞·ªùng">Normalization & Augmentation</h4>
                                    <p data-en="Images are normalized using ImageNet statistics and augmented during training to improve model generalization. This step is crucial for transfer learning."
                                       data-vi="·∫¢nh ƒë∆∞·ª£c chu·∫©n h√≥a b·∫±ng th·ªëng k√™ ImageNet v√† tƒÉng c∆∞·ªùng trong qu√° tr√¨nh hu·∫•n luy·ªán ƒë·ªÉ c·∫£i thi·ªán kh·∫£ nƒÉng t·ªïng qu√°t h√≥a c·ªßa m√¥ h√¨nh. B∆∞·ªõc n√†y r·∫•t quan tr·ªçng cho transfer learning.">
                                        Images are normalized using ImageNet statistics and augmented during training to improve model generalization. This step is crucial for transfer learning.
                                    </p>
                                </div>
                                <div class="detail-code">
                                    <h4 data-en="Code Example" data-vi="V√≠ D·ª• M√£">Code Example</h4>
                                    <pre><code># Training transforms with augmentation
train_transform = transforms.Compose([
    transforms.Resize((256, 256)),
    transforms.RandomCrop((224, 224)),
    transforms.RandomHorizontalFlip(p=0.5),
    transforms.ColorJitter(brightness=0.2, contrast=0.2),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], 
                        std=[0.229, 0.224, 0.225])
])

# Validation transforms (no augmentation)
val_transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], 
                        std=[0.229, 0.224, 0.225])
])</code></pre>
                                </div>
                            </div>
                        </div>
                        
                        <!-- CNN Model Tab -->
                        <div id="cnn-model-detail" class="pipeline-detail-tab-content">
                            <h3 data-en="üß† CNN Model Architecture" data-vi="üß† Ki·∫øn Tr√∫c M√¥ H√¨nh CNN">üß† CNN Model Architecture</h3>
                            <div class="detail-content">
                                <div class="detail-explanation">
                                    <h4 data-en="Pre-trained CNN Models" data-vi="M√¥ H√¨nh CNN ƒê√£ Hu·∫•n Luy·ªán">Pre-trained CNN Models</h4>
                                    <p data-en="We use pre-trained models from timm library: ResNet50, EfficientNet-B3, and MobileNetV3. These models were trained on ImageNet and provide excellent feature extraction capabilities."
                                       data-vi="Ch√∫ng t√¥i s·ª≠ d·ª•ng c√°c m√¥ h√¨nh ƒë√£ hu·∫•n luy·ªán t·ª´ th∆∞ vi·ªán timm: ResNet50, EfficientNet-B3, v√† MobileNetV3. C√°c m√¥ h√¨nh n√†y ƒë∆∞·ª£c hu·∫•n luy·ªán tr√™n ImageNet v√† cung c·∫•p kh·∫£ nƒÉng tr√≠ch xu·∫•t ƒë·∫∑c tr∆∞ng tuy·ªát v·ªùi.">
                                        We use pre-trained models from timm library: ResNet50, EfficientNet-B3, and MobileNetV3. These models were trained on ImageNet and provide excellent feature extraction capabilities.
                                    </p>
                                </div>
                                <div class="detail-code">
                                    <h4 data-en="Code Example" data-vi="V√≠ D·ª• M√£">Code Example</h4>
                                    <pre><code>import timm
import torch.nn as nn

# Create models using timm
models = {
    'resnet50': timm.create_model('resnet50', pretrained=True, num_classes=37),
    'efficientnet_b3': timm.create_model('efficientnet_b3', pretrained=True, num_classes=37),
    'mobilenetv3_large_100': timm.create_model('mobilenetv3_large_100', pretrained=True, num_classes=37)
}

# Model summary
for name, model in models.items():
    print(f"{name}: {sum(p.numel() for p in model.parameters())} parameters")</code></pre>
                                </div>
                            </div>
                            
                            <!-- Model Cards -->
                            <div class="model-cards-container" style="margin-top: 2rem;">
                                <h4 data-en="Available Models" data-vi="C√°c M√¥ H√¨nh C√≥ S·∫µn">Available Models</h4>
                                <div class="model-cards-grid">
                                    <!-- ResNet50 Card -->
                                    <div class="model-card">
                                        <div class="model-card-header">
                                            <div class="model-icon">üèóÔ∏è</div>
                                            <h5>ResNet50</h5>
                                        </div>
                                        <div class="model-metrics">
                                            <div class="model-metric">
                                                <div class="model-metric-value">95.2%</div>
                                                <div class="model-metric-label" data-en="Accuracy" data-vi="ƒê·ªô Ch√≠nh X√°c">Accuracy</div>
                                            </div>
                                            <div class="model-metric">
                                                <div class="model-metric-value">25.6M</div>
                                                <div class="model-metric-label" data-en="Parameters" data-vi="Tham S·ªë">Parameters</div>
                                            </div>
                                            <div class="model-metric">
                                                <div class="model-metric-value">4.1B</div>
                                                <div class="model-metric-label" data-en="FLOPs" data-vi="FLOPs">FLOPs</div>
                                            </div>
                                        </div>
                                        <div class="model-description">
                                            <p data-en="Deep residual network with 50 layers. Excellent balance of accuracy and efficiency."
                                               data-vi="M·∫°ng residual s√¢u v·ªõi 50 l·ªõp. C√¢n b·∫±ng t·ªët gi·ªØa ƒë·ªô ch√≠nh x√°c v√† hi·ªáu qu·∫£.">
                                                Deep residual network with 50 layers. Excellent balance of accuracy and efficiency.
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <!-- EfficientNet-B3 Card -->
                                    <div class="model-card">
                                        <div class="model-card-header">
                                            <div class="model-icon">‚ö°</div>
                                            <h5>EfficientNet-B3</h5>
                                        </div>
                                        <div class="model-metrics">
                                            <div class="model-metric">
                                                <div class="model-metric-value">96.1%</div>
                                                <div class="model-metric-label" data-en="Accuracy" data-vi="ƒê·ªô Ch√≠nh X√°c">Accuracy</div>
                                            </div>
                                            <div class="model-metric">
                                                <div class="model-metric-value">12M</div>
                                                <div class="model-metric-label" data-en="Parameters" data-vi="Tham S·ªë">Parameters</div>
                                            </div>
                                            <div class="model-metric">
                                                <div class="model-metric-value">1.8B</div>
                                                <div class="model-metric-label" data-en="FLOPs" data-vi="FLOPs">FLOPs</div>
                                            </div>
                                        </div>
                                        <div class="model-description">
                                            <p data-en="Compound scaling with optimal efficiency. Best accuracy with fewer parameters."
                                               data-vi="Compound scaling v·ªõi hi·ªáu qu·∫£ t·ªëi ∆∞u. ƒê·ªô ch√≠nh x√°c t·ªët nh·∫•t v·ªõi √≠t tham s·ªë h∆°n.">
                                                Compound scaling with optimal efficiency. Best accuracy with fewer parameters.
                                            </p>
                                        </div>
                                    </div>
                                    
                                    <!-- MobileNetV3 Card -->
                                    <div class="model-card">
                                        <div class="model-card-header">
                                            <div class="model-icon">üì±</div>
                                            <h5>MobileNetV3</h5>
                                        </div>
                                        <div class="model-metrics">
                                            <div class="model-metric">
                                                <div class="model-metric-value">93.8%</div>
                                                <div class="model-metric-label" data-en="Accuracy" data-vi="ƒê·ªô Ch√≠nh X√°c">Accuracy</div>
                                            </div>
                                            <div class="model-metric">
                                                <div class="model-metric-value">5.5M</div>
                                                <div class="model-metric-label" data-en="Parameters" data-vi="Tham S·ªë">Parameters</div>
                                            </div>
                                            <div class="model-metric">
                                                <div class="model-metric-value">0.2B</div>
                                                <div class="model-metric-label" data-en="FLOPs" data-vi="FLOPs">FLOPs</div>
                                            </div>
                                        </div>
                                        <div class="model-description">
                                            <p data-en="Mobile-optimized architecture. Fastest inference with good accuracy."
                                               data-vi="Ki·∫øn tr√∫c t·ªëi ∆∞u cho mobile. Inference nhanh nh·∫•t v·ªõi ƒë·ªô ch√≠nh x√°c t·ªët.">
                                                Mobile-optimized architecture. Fastest inference with good accuracy.
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Classifier Head Tab -->
                        <div id="classifier-head-detail" class="pipeline-detail-tab-content">
                            <h3 data-en="üéØ Classifier Head Adaptation" data-vi="üéØ ƒêi·ªÅu Ch·ªânh ƒê·∫ßu Ph√¢n Lo·∫°i">üéØ Classifier Head Adaptation</h3>
                            <div class="detail-content">
                                <div class="detail-explanation">
                                    <h4 data-en="Transfer Learning Adaptation" data-vi="ƒêi·ªÅu Ch·ªânh Transfer Learning">Transfer Learning Adaptation</h4>
                                    <p data-en="The final classification layer is adapted from 1000 ImageNet classes to 37 pet breed classes. This is the key step in transfer learning - we freeze the feature extractor and only train the classifier head."
                                       data-vi="L·ªõp ph√¢n lo·∫°i cu·ªëi c√πng ƒë∆∞·ª£c ƒëi·ªÅu ch·ªânh t·ª´ 1000 l·ªõp ImageNet th√†nh 37 l·ªõp gi·ªëng th√∫ c∆∞ng. ƒê√¢y l√† b∆∞·ªõc quan tr·ªçng trong transfer learning - ch√∫ng ta ƒë√≥ng bƒÉng b·ªô tr√≠ch xu·∫•t ƒë·∫∑c tr∆∞ng v√† ch·ªâ hu·∫•n luy·ªán ƒë·∫ßu ph√¢n lo·∫°i.">
                                        The final classification layer is adapted from 1000 ImageNet classes to 37 pet breed classes. This is the key step in transfer learning - we freeze the feature extractor and only train the classifier head.
                                    </p>
                                </div>
                                <div class="detail-code">
                                    <h4 data-en="Code Example" data-vi="V√≠ D·ª• M√£">Code Example</h4>
                                    <pre><code># Freeze feature extractor
for param in model.parameters():
    param.requires_grad = False

# Replace classifier head
if hasattr(model, 'classifier'):
    model.classifier = nn.Linear(model.classifier.in_features, 37)
elif hasattr(model, 'fc'):
    model.fc = nn.Linear(model.fc.in_features, 37)
elif hasattr(model, 'head'):
    model.head = nn.Linear(model.head.in_features, 37)

# Only train the new classifier
for param in model.classifier.parameters():
    param.requires_grad = True</code></pre>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Results Tab -->
                        <div id="results-detail" class="pipeline-detail-tab-content">
                            <h3 data-en="‚ú® Classification Results" data-vi="‚ú® K·∫øt Qu·∫£ Ph√¢n Lo·∫°i">‚ú® Classification Results</h3>
                            <div class="detail-content">
                                <div class="detail-explanation">
                                    <h4 data-en="Model Predictions & Evaluation" data-vi="D·ª± ƒêo√°n & ƒê√°nh Gi√° M√¥ H√¨nh">Model Predictions & Evaluation</h4>
                                    <p data-en="The model outputs probability scores for all 37 breed classes. We use top-1 and top-5 accuracy to evaluate performance. The best models achieve 95%+ accuracy on the test set."
                                       data-vi="M√¥ h√¨nh xu·∫•t ra ƒëi·ªÉm s·ªë x√°c su·∫•t cho t·∫•t c·∫£ 37 l·ªõp gi·ªëng. Ch√∫ng t√¥i s·ª≠ d·ª•ng ƒë·ªô ch√≠nh x√°c top-1 v√† top-5 ƒë·ªÉ ƒë√°nh gi√° hi·ªáu su·∫•t. C√°c m√¥ h√¨nh t·ªët nh·∫•t ƒë·∫°t ƒë∆∞·ª£c ƒë·ªô ch√≠nh x√°c 95%+ tr√™n t·∫≠p ki·ªÉm tra.">
                                        The model outputs probability scores for all 37 breed classes. We use top-1 and top-5 accuracy to evaluate performance. The best models achieve 95%+ accuracy on the test set.
                                    </p>
                                </div>
                                <div class="detail-code">
                                    <h4 data-en="Code Example" data-vi="V√≠ D·ª• M√£">Code Example</h4>
                                    <pre><code># Model inference
model.eval()
with torch.no_grad():
    outputs = model(input_tensor)
    probabilities = torch.softmax(outputs, dim=1)
    predicted_class = torch.argmax(probabilities, dim=1)
    
# Get top-5 predictions
top5_probs, top5_indices = torch.topk(probabilities, 5, dim=1)
print(f"Predicted class: {predicted_class.item()}")
print(f"Top-5 classes: {top5_indices[0].tolist()}")
print(f"Top-5 probabilities: {top5_probs[0].tolist()}")</code></pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab 2: Tutorials -->
                <div id="tutorials-tab" class="pipeline-tab-content">
                    <div class="tutorial-content">
                        <h3 data-en="üìö Step-by-Step Tutorial" data-vi="üìö H∆∞·ªõng D·∫´n T·ª´ng B∆∞·ªõc">üìö Step-by-Step Tutorial</h3>
                        <div class="tutorial-steps">
                            <div class="tutorial-step">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4 data-en="Data Preparation" data-vi="Chu·∫©n B·ªã D·ªØ Li·ªáu">Data Preparation</h4>
                                    <p data-en="Download and organize the Oxford Pets dataset with 37 breed classes."
                                       data-vi="T·∫£i xu·ªëng v√† t·ªï ch·ª©c t·∫≠p d·ªØ li·ªáu Oxford Pets v·ªõi 37 l·ªõp gi·ªëng.">
                                        Download and organize the Oxford Pets dataset with 37 breed classes.
                                    </p>
                                </div>
                            </div>
                            <div class="tutorial-step">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4 data-en="Model Selection" data-vi="L·ª±a Ch·ªçn M√¥ H√¨nh">Model Selection</h4>
                                    <p data-en="Choose between ResNet50, EfficientNet, ViT, or MobileNet architectures."
                                       data-vi="Ch·ªçn gi·ªØa c√°c ki·∫øn tr√∫c ResNet50, EfficientNet, ViT, ho·∫∑c MobileNet.">
                                        Choose between ResNet50, EfficientNet, ViT, or MobileNet architectures.
                                    </p>
                                </div>
                            </div>
                            <div class="tutorial-step">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4 data-en="Transfer Learning" data-vi="Transfer Learning">Transfer Learning</h4>
                                    <p data-en="Adapt pre-trained models from ImageNet (1000 classes) to our 37 breed classes."
                                       data-vi="ƒêi·ªÅu ch·ªânh c√°c m√¥ h√¨nh ƒë√£ hu·∫•n luy·ªán t·ª´ ImageNet (1000 l·ªõp) cho 37 l·ªõp gi·ªëng c·ªßa ch√∫ng ta.">
                                        Adapt pre-trained models from ImageNet (1000 classes) to our 37 breed classes.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Tab 3: Code -->
                <div id="code-tab" class="pipeline-tab-content">
                    <div class="code-content">
                        <h3 data-en="üíª Implementation Code" data-vi="üíª M√£ Tri·ªÉn Khai">üíª Implementation Code</h3>
                        <div class="code-tabs">
                            <button class="code-tab-btn active" onclick="switchCodeTab('setup')">Setup</button>
                            <button class="code-tab-btn" onclick="switchCodeTab('training')">Training</button>
                            <button class="code-tab-btn" onclick="switchCodeTab('evaluation')">Evaluation</button>
                        </div>
                        
                        <div id="setup-code" class="code-tab-content active">
                            <pre><code>import torch
import torchvision
from torchvision import transforms, models

# Load pre-trained model
model = models.resnet50(pretrained=True)
model.fc = torch.nn.Linear(model.fc.in_features, 37)  # 37 classes

# Data transforms
transform = transforms.Compose([
    transforms.Resize((224, 224)),
    transforms.ToTensor(),
    transforms.Normalize(mean=[0.485, 0.456, 0.406], 
                        std=[0.229, 0.224, 0.225])
])</code></pre>
                        </div>
                    </div>
                </div>
                
                <!-- Tab 4: Colab -->
                <div id="colab-tab" class="pipeline-tab-content">
                    <div class="colab-content">
                        <h3 data-en="üöÄ Google Colab Notebook" data-vi="üöÄ Notebook Google Colab">üöÄ Google Colab Notebook</h3>
                        <p data-en="Run the complete pipeline in Google Colab with free GPU access."
                           data-vi="Ch·∫°y to√†n b·ªô quy tr√¨nh trong Google Colab v·ªõi truy c·∫≠p GPU mi·ªÖn ph√≠.">
                            Run the complete pipeline in Google Colab with free GPU access.
                        </p>
                        <div class="colab-buttons">
                            <a href="https://colab.research.google.com/github/LTSACH/AILearningHub/blob/main/03_Computer_Vision/oxford_pets/classification/notebook.ipynb" 
                               class="colab-btn" target="_blank">
                                üöÄ Open in Colab
                            </a>
                            <a href="https://github.com/LTSACH/AILearningHub/tree/main/03_Computer_Vision/oxford_pets/classification" 
                               class="github-btn" target="_blank">
                                üìÅ View on GitHub
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Model Comparison Section -->
        <section class="ai-section">
            <h2 class="ai-heading-2" data-en="üìä Model Comparison" data-vi="üìä So S√°nh M√¥ H√¨nh">üìä Model Comparison</h2>
            <p class="ai-text-light" style="margin-bottom: 2rem;"
               data-en="Compare performance metrics across CNN models"
               data-vi="So s√°nh c√°c ch·ªâ s·ªë hi·ªáu su·∫•t gi·ªØa c√°c m√¥ h√¨nh CNN">
                Compare performance metrics across CNN models
            </p>
            
            <!-- Comparison Tabs -->
            <div class="comparison-section">
                <div class="comparison-tabs">
                    <button class="comparison-tab-btn active" onclick="switchComparisonTab('performance')">
                        üìà Performance
                    </button>
                    <button class="comparison-tab-btn" onclick="switchComparisonTab('resources')">
                        ‚ö° Resources
                    </button>
                    <button class="comparison-tab-btn" onclick="switchComparisonTab('formulas')">
                        üßÆ Formulas
                    </button>
                </div>
                
                <!-- Performance Tab -->
                <div id="performance-tab" class="comparison-tab-content active">
                    <div class="comparison-table-container">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th data-en="Model" data-vi="M√¥ H√¨nh">Model</th>
                                    <th data-en="Precision ‚Üë" data-vi="Precision ‚Üë">Precision ‚Üë</th>
                                    <th data-en="Recall ‚Üë" data-vi="Recall ‚Üë">Recall ‚Üë</th>
                                    <th data-en="F1-Score ‚Üë" data-vi="F1-Score ‚Üë">F1-Score ‚Üë</th>
                                    <th data-en="Accuracy ‚Üë" data-vi="ƒê·ªô Ch√≠nh X√°c ‚Üë">Accuracy ‚Üë</th>
                                    <th data-en="Top-5 Accuracy ‚Üë" data-vi="Top-5 Accuracy ‚Üë">Top-5 Acc ‚Üë</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>ResNet50</strong></td>
                                    <td><span class="metric-value good">94.8%</span></td>
                                    <td><span class="metric-value good">95.1%</span></td>
                                    <td><span class="metric-value good">94.9%</span></td>
                                    <td><span class="metric-value good">95.2%</span></td>
                                    <td><span class="metric-value best">98.7%</span></td>
                                </tr>
                                <tr>
                                    <td><strong>EfficientNet-B3</strong></td>
                                    <td><span class="metric-value best">94.5%</span></td>
                                    <td><span class="metric-value best">94.3%</span></td>
                                    <td><span class="metric-value best">94.4%</span></td>
                                    <td><span class="metric-value best">96.1%</span></td>
                                    <td><span class="metric-value best">99.2%</span></td>
                                </tr>
                                <tr>
                                    <td><strong>MobileNetV3</strong></td>
                                    <td><span class="metric-value">90.8%</span></td>
                                    <td><span class="metric-value">90.5%</span></td>
                                    <td><span class="metric-value">90.6%</span></td>
                                    <td><span class="metric-value">93.8%</span></td>
                                    <td><span class="metric-value">97.8%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Resources Tab -->
                <div id="resources-tab" class="comparison-tab-content">
                    <div class="comparison-table-container">
                        <table class="comparison-table">
                            <thead>
                                <tr>
                                    <th data-en="Model" data-vi="M√¥ H√¨nh">Model</th>
                                    <th data-en="Training Time ‚Üì" data-vi="Th·ªùi Gian Hu·∫•n Luy·ªán ‚Üì">Training Time ‚Üì</th>
                                    <th data-en="Inference Time ‚Üì" data-vi="Th·ªùi Gian D·ª± ƒêo√°n ‚Üì">Inference Time ‚Üì</th>
                                    <th data-en="FLOPs ‚Üì" data-vi="FLOPs ‚Üì">FLOPs ‚Üì</th>
                                    <th data-en="Parameters ‚Üì" data-vi="Tham S·ªë ‚Üì">Parameters ‚Üì</th>
                                    <th data-en="Model Size ‚Üì" data-vi="K√≠ch Th∆∞·ªõc ‚Üì">Model Size ‚Üì</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><strong>ResNet50</strong></td>
                                    <td><span class="metric-value">45min</span></td>
                                    <td><span class="metric-value">8ms</span></td>
                                    <td><span class="metric-value">4.1B</span></td>
                                    <td><span class="metric-value">25.6M</span></td>
                                    <td><span class="metric-value">98MB</span></td>
                                </tr>
                                <tr>
                                    <td><strong>EfficientNet-B3</strong></td>
                                    <td><span class="metric-value good">32min</span></td>
                                    <td><span class="metric-value good">6ms</span></td>
                                    <td><span class="metric-value best">1.8B</span></td>
                                    <td><span class="metric-value best">12M</span></td>
                                    <td><span class="metric-value best">47MB</span></td>
                                </tr>
                                <tr>
                                    <td><strong>MobileNetV3</strong></td>
                                    <td><span class="metric-value best">18min</span></td>
                                    <td><span class="metric-value best">3ms</span></td>
                                    <td><span class="metric-value best">0.2B</span></td>
                                    <td><span class="metric-value best">5.5M</span></td>
                                    <td><span class="metric-value best">21MB</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Formulas Tab -->
                <div id="formulas-tab" class="comparison-tab-content">
                    <div class="formulas-content">
                        <!-- Content will be populated by MetricsWalkthrough component -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Confusion Matrix Section -->
        <section class="ai-section">
            <h2 class="ai-heading-2" data-en="üìä Confusion Matrix" data-vi="üìä Ma Tr·∫≠n Nh·∫ßm L·∫´n">üìä Confusion Matrix</h2>
            <p class="ai-text-light" style="margin-bottom: 2rem;"
               data-en="Select a model from the comparison table above to view its confusion matrix"
               data-vi="Ch·ªçn m·ªôt m√¥ h√¨nh t·ª´ b·∫£ng so s√°nh ·ªü tr√™n ƒë·ªÉ xem ma tr·∫≠n nh·∫ßm l·∫´n">
                Select a model from the comparison table above to view its confusion matrix
            </p>
            
            <div id="model-selection-info" style="background: #f8f9fa; padding: 1rem; border-radius: 8px; margin-bottom: 2rem; text-align: center; border: 2px dashed #dee2e6;">
                <p style="margin: 0; color: #6c757d; font-style: italic;">
                    <span data-en="Click on a model row in the comparison table to view its confusion matrix" data-vi="Nh·∫•p v√†o d√≤ng m√¥ h√¨nh trong b·∫£ng so s√°nh ƒë·ªÉ xem ma tr·∫≠n nh·∫ßm l·∫´n">
                        Click on a model row in the comparison table to view its confusion matrix
                    </span>
                </p>
            </div>
            
            <div id="confusion-matrix-plotly" style="display: flex; justify-content: center; align-items: center; width: 100%;"></div>
        </section>


    </div>

    <!-- Footer -->
    <footer style="background: var(--ai-bg-light); color: var(--ai-text); text-align: center; padding: 2rem; margin-top: 4rem; border-top: 1px solid var(--ai-border);">
        <p data-en="¬© 2025 AI Learning Hub - Educational content for AI enthusiasts" data-vi="¬© 2025 AI Learning Hub - N·ªôi dung gi√°o d·ª•c cho nh·ªØng ng∆∞·ªùi ƒëam m√™ AI">¬© 2025 AI Learning Hub - Educational content for AI enthusiasts</p>
        <div id="theme-selector" style="margin-top: 1rem;"></div>
    </footer>

        <!-- Load Plotly for interactive charts -->
        <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>
        
        <!-- Load MathJax for LaTeX rendering -->
        <script>
            window.MathJax = {
                tex: {
                    inlineMath: [['$', '$'], ['\(', '\)']],
                    displayMath: [['$$', '$$'], ['\[', '\]']],
                    processEscapes: true,
                    processEnvironments: true
                },
                options: {
                    skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
                }
            };
        </script>
        <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        
        <!-- Load shared components JavaScript from centralized library -->
        <script src="https://ltsach.github.io/AILearningHub/ai-report-components/js/utils/ThemeManager.js"></script>
        <script src="https://ltsach.github.io/AILearningHub/ai-report-components/js/utils/LanguageManager.js"></script>
        <script src="https://ltsach.github.io/AILearningHub/ai-report-components/js/components/Header.js"></script>
        <script src="https://ltsach.github.io/AILearningHub/ai-report-components/js/components/Hero.js"></script>
        <script src="https://ltsach.github.io/AILearningHub/ai-report-components/js/components/ComparisonTable.js"></script>
        <script src="https://ltsach.github.io/AILearningHub/ai-report-components/js/components/Pipeline.js"></script>
    
    <script>
        // Initialize components when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize header
            const header = new AIHeader('ai-header', {
                brand: 'üìö AI Learning Hub',
                brandUrl: '../../index.html',
                navItems: [
                    { label: 'Home', url: '../../index.html', active: false },
                    { label: 'Data Analysis', url: '../../01_Data_Analysis/', active: false },
                    { label: 'Machine Learning', url: '../../02_Machine_Learning/', active: false },
                    { label: 'Computer Vision', url: '../index.html', active: false },
                    { label: 'Classification', url: 'index.html', active: true }
                ]
            });
            
            // Initialize hero section
            const hero = new AIHero('ai-hero', {
                title: 'üìä Breed Classification',
                titleVi: 'üìä Ph√¢n Lo·∫°i Gi·ªëng Ch√≥',
                subtitle: '37-class breed classification using CNN architectures and transfer learning',
                subtitleVi: 'Ph√¢n lo·∫°i 37 gi·ªëng ch√≥ s·ª≠ d·ª•ng ki·∫øn tr√∫c CNN v√† transfer learning',
                stats: [
                    { value: '37', label: 'Breeds', labelVi: 'Gi·ªëng' },
                    { value: '7,393', label: 'Images', labelVi: '·∫¢nh' },
                    { value: '8', label: 'Models', labelVi: 'M√¥ H√¨nh' },
                    { value: '95.2%', label: 'Best Accuracy', labelVi: 'ƒê·ªô Ch√≠nh X√°c T·ªët Nh·∫•t' }
                ],
                gradient: false
            });
            
            
            // Initialize theme selector
            window.AIThemeManager.createThemeSelector('theme-selector');
            
            // Listen for theme changes to update components
            window.AIThemeManager.onThemeChange(function(newTheme) {
                console.log('Theme changed to:', newTheme);
                // Components will automatically update due to CSS changes
            });

            // Initialize language manager
            window.AILanguageManager.createLanguageSwitcher('language-switcher');
            window.AILanguageManager.onLanguageChange(function(newLang) {
                console.log('Language changed to:', newLang);
            });
            
            // Initialize comparison tab switching
            window.switchComparisonTab = function(tabName) {
                // Hide all tab contents
                const tabContents = document.querySelectorAll('.comparison-tab-content');
                tabContents.forEach(content => content.style.display = 'none');
                
                // Remove active class from all buttons
                const tabButtons = document.querySelectorAll('.comparison-tab-btn');
                tabButtons.forEach(btn => btn.classList.remove('active'));
                
                // Show selected tab content
                const selectedTab = document.getElementById(tabName + '-tab');
                if (selectedTab) {
                    selectedTab.style.display = 'block';
                }
                
                // Add active class to clicked button
                const clickedButton = document.querySelector(`[onclick="switchComparisonTab('${tabName}')"]`);
                if (clickedButton) {
                    clickedButton.classList.add('active');
                }
            };
            
            // Load and initialize components with mock data
            fetch('https://ltsach.github.io/AILearningHub/datasets/oxford-pets/data/models_data.json')
                .then(response => response.json())
                .then(data => {
                    // Create Plotly confusion matrix heatmap
                    const confusionData = data.confusion_matrix.resnet50;
                    const matrix = confusionData.matrix;
                    const classNames = confusionData.class_names;
                    
                    // Create Plotly heatmap
                    const plotData = [{
                        z: matrix,
                        x: classNames,
                        y: classNames,
                        type: 'heatmap',
                        colorscale: 'Blues',
                        showscale: true,
                        hoverongaps: false,
                        hovertemplate: 'True: %{y}<br>Predicted: %{x}<br>Count: %{z}<extra></extra>'
                    }];
                    
                    const layout = {
                        title: {
                            text: 'Confusion Matrix - ResNet50',
                            font: { size: 16 }
                        },
                        xaxis: {
                            title: 'Predicted Class',
                            tickangle: -45,
                            tickfont: { size: 10 }
                        },
                        yaxis: {
                            title: 'True Class',
                            tickfont: { size: 10 }
                        },
                        width: 800,
                        height: 600,
                        margin: { l: 150, r: 50, t: 80, b: 150 }
                    };
                    
                    const config = {
                        displayModeBar: true,
                        displaylogo: false,
                        modeBarButtonsToRemove: ['pan2d', 'lasso2d', 'select2d']
                    };
                    
                    // Store confusion matrix data globally
                    window.confusionMatrixData = data.confusion_matrix;
                    console.log('Confusion matrix data loaded:', window.confusionMatrixData);
                    
                    // Add click handlers to comparison table rows
                    const comparisonRows = document.querySelectorAll('.comparison-table tbody tr');
                    comparisonRows.forEach((row, index) => {
                        row.style.cursor = 'pointer';
                        row.addEventListener('click', function() {
                            // Remove previous selection
                            comparisonRows.forEach(r => r.style.backgroundColor = '');
                            
                            // Highlight selected row
                            this.style.backgroundColor = '#e3f2fd';
                            
                            // Get model name from first cell
                            const modelName = this.cells[0].textContent.trim();
                            
                            // Update selection info
                            const infoDiv = document.getElementById('model-selection-info');
                            infoDiv.innerHTML = `
                                <p style="margin: 0; color: #1976d2; font-weight: 500;">
                                    <span data-en="Showing confusion matrix for: " data-vi="Hi·ªÉn th·ªã ma tr·∫≠n nh·∫ßm l·∫´n cho: ">Showing confusion matrix for: </span>
                                    <strong>${modelName}</strong>
                                </p>
                            `;
                            
                            // Show confusion matrix for selected model
                            showConfusionMatrix(modelName);
                        });
                    });
                    
                    // Function to show confusion matrix for selected model
                    function showConfusionMatrix(modelName) {
                        console.log('showConfusionMatrix called with:', modelName);
                        console.log('Available confusion data:', window.confusionMatrixData);
                        
                        let modelKey = '';
                        switch(modelName) {
                            case 'ResNet50':
                                modelKey = 'resnet50';
                                break;
                            case 'EfficientNet-B3':
                                modelKey = 'efficientnet_b3';
                                break;
                            case 'MobileNetV3':
                                modelKey = 'mobilenetv3_large_100';
                                break;
                            default:
                                modelKey = 'resnet50'; // Default fallback
                        }
                        
                        console.log('Looking for model key:', modelKey);
                        const confusionData = window.confusionMatrixData[modelKey];
                        console.log('Found confusion data:', confusionData);
                        if (!confusionData) {
                            console.error('No confusion data found for model:', modelKey);
                            return;
                        }
                        
                        const matrix = confusionData.matrix;
                        const classNames = confusionData.class_names;
                        
                        const plotData = [{
                            z: matrix,
                            x: classNames,
                            y: classNames,
                            type: 'heatmap',
                            colorscale: 'Blues',
                            showscale: true,
                            hoverongaps: false,
                            hovertemplate: 'True: %{y}<br>Predicted: %{x}<br>Count: %{z}<extra></extra>'
                        }];
                        
                        const layout = {
                            title: {
                                text: `Confusion Matrix - ${modelName}`,
                                font: { size: 16 }
                            },
                            xaxis: {
                                title: 'Predicted Class',
                                tickangle: -45,
                                tickfont: { size: 10 }
                            },
                            yaxis: {
                                title: 'True Class',
                                tickfont: { size: 10 }
                            },
                            width: 800,
                            height: 600,
                            margin: { l: 150, r: 50, t: 80, b: 150 }
                        };
                        
                        const config = {
                            displayModeBar: true,
                            displaylogo: false,
                            modeBarButtonsToRemove: ['pan2d', 'lasso2d', 'select2d']
                        };
                        
                        // Don't show confusion matrix initially - wait for user selection
                    }
                         
                         // Initialize formulas in comparison section
                         const formulasContainer = document.querySelector('#formulas-tab .formulas-content');
                         if (formulasContainer) {
                             // Direct HTML injection for formulas with proper LaTeX
                             formulasContainer.innerHTML = `
                                 <!-- Classification Metrics -->
                                 <div class="config-card" style="margin-bottom: 1.5rem;">
                                     <h4>üìä Classification Metrics</h4>
                                     <div style="line-height: 2.2;">
                                         <div style="padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.5rem;">
                                             <strong>Accuracy:</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Accuracy} = \frac{\text{TP} + \text{TN}}{\text{TP} + \text{TN} + \text{FP} + \text{FN}} = \frac{\sum_{i=1}^{n} \text{CM}[i,i]}{\text{Total Samples}}$$
                                             </div>
                                         </div>
                                         
                                         <div style="padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.5rem;">
                                             <strong>Precision (per class i):</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Precision}_i = \frac{\text{TP}_i}{\text{TP}_i + \text{FP}_i} = \frac{\text{CM}[i,i]}{\sum_{j=1}^{n} \text{CM}[j,i]}$$
                                             </div>
                                         </div>
                                         
                                         <div style="padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.5rem;">
                                             <strong>Recall (per class i):</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Recall}_i = \frac{\text{TP}_i}{\text{TP}_i + \text{FN}_i} = \frac{\text{CM}[i,i]}{\sum_{j=1}^{n} \text{CM}[i,j]}$$
                                             </div>
                                         </div>
                                         
                                         <div style="padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.5rem;">
                                             <strong>F1-Score (per class i):</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{F1}_i = \frac{2 \times \text{Precision}_i \times \text{Recall}_i}{\text{Precision}_i + \text{Recall}_i} = \frac{2 \times \text{CM}[i,i]}{\text{Support}_i + \text{Predicted}_i}$$
                                             </div>
                                         </div>
                                     </div>
                                 </div>
                                 
                                 <!-- Averaging Methods -->
                                 <div class="config-card" style="margin-bottom: 1.5rem;">
                                     <h4>üìà Averaging Methods</h4>
                                     <div style="line-height: 2.2;">
                                         <div style="padding: 0.75rem; background: #f0f4ff; border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid #667eea;">
                                             <strong>Macro Average:</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Metric}_{\text{macro}} = \frac{1}{n} \sum_{i=1}^{n} \text{Metric}_i$$
                                             </div>
                                             <div style="font-size: 0.85rem; color: #666; text-align: center;">Equal weight to each class (good for imbalanced datasets)</div>
                                         </div>
                                         
                                         <div style="padding: 0.75rem; background: #f0fff4; border-radius: 8px; margin-bottom: 0.5rem; border-left: 4px solid #10b981;">
                                             <strong>Weighted Average:</strong><br>
                                             <div style="font-size: 1.2rem; color: #10b981; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Metric}_{\text{weighted}} = \frac{\sum_{i=1}^{n} \text{Metric}_i \times \text{Support}_i}{\sum_{i=1}^{n} \text{Support}_i}$$
                                             </div>
                                             <div style="font-size: 0.85rem; color: #666; text-align: center;">Weight by class frequency (reflects overall performance)</div>
                                         </div>
                                     </div>
                                 </div>
                                 
                                 <!-- Confusion Matrix Components -->
                                 <div class="config-card">
                                     <h4>üéØ Confusion Matrix Components</h4>
                                     <div style="line-height: 2.2;">
                                         <div style="padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.5rem;">
                                             <strong>Support (per class i):</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Support}_i = \sum_{j=1}^{n} \text{CM}[i,j]$$
                                             </div>
                                             <div style="font-size: 0.85rem; color: #666; text-align: center;">Total actual instances of class i (row sum)</div>
                                         </div>
                                         
                                         <div style="padding: 0.75rem; background: #f8f9fa; border-radius: 8px; margin-bottom: 0.5rem;">
                                             <strong>Predicted (per class i):</strong><br>
                                             <div style="font-size: 1.2rem; color: #667eea; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{Predicted}_i = \sum_{j=1}^{n} \text{CM}[j,i]$$
                                             </div>
                                             <div style="font-size: 0.85rem; color: #666; text-align: center;">Total predicted instances of class i (column sum)</div>
                                         </div>
                                         
                                         <div style="padding: 0.75rem; background: #e8f5e9; border-radius: 8px; border-left: 4px solid #10b981;">
                                             <strong>True Positives (per class i):</strong><br>
                                             <div style="font-size: 1.2rem; color: #10b981; text-align: center; margin: 0.5rem 0;">
                                                 $$\text{TP}_i = \text{CM}[i,i]$$
                                             </div>
                                             <div style="font-size: 0.85rem; color: #666; text-align: center;">Diagonal element (correctly predicted instances)</div>
                                         </div>
                                     </div>
                                 </div>
                                 
                                 <!-- Note -->
                                 <div style="background: #fff3cd; color: #856404; padding: 1rem; border-radius: 8px; margin-top: 1.5rem; border-left: 4px solid #ffc107;">
                                     <strong>üí° Note:</strong> All formulas use the confusion matrix (CM) as the primary data structure. 
                                     For multi-class classification with <em>n</em> classes, CM is an <em>n √ó n</em> matrix where CM[i,j] represents 
                                     the number of samples with true label <em>i</em> predicted as label <em>j</em>.
                                 </div>
                             `;
                             
                             // Re-render MathJax after a short delay
                             setTimeout(() => {
                                 if (window.MathJax && window.MathJax.typesetPromise) {
                                     window.MathJax.typesetPromise([formulasContainer]);
                                 }
                             }, 100);
                         }
                })
                .catch(error => {
                    console.error('Error loading data:', error);
                    // Fallback to static content
                });
        });
    </script>
</body>
</html>