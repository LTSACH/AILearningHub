<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Adult Income Dataset - EDA Report with Interactive Tutorials</title>
    
    <!-- External Libraries -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.27.0.min.js"></script>
    
    <!-- Prism.js for Code Syntax Highlighting -->
    <link id="prism-theme" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-coy.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>


    <style>
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
    
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px 40px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 300;
        }
        
        .header .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .content {
            padding: 40px;
        }
        
        .footer {
            background: #f8f9fa;
            padding: 30px;
            text-align: center;
            color: #666;
        }
    
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-header-wrapper {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .section h2 {
            color: #333;
            font-size: 1.8em;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
            cursor: pointer;
            user-select: none;
            position: relative;
            padding-right: 40px;
            transition: all 0.3s ease;
            flex: 1;
        }
        
        .section h2:hover {
            color: #667eea;
        }
        
        .section h2::after {
            content: '▼';
            position: absolute;
            right: 10px;
            font-size: 0.7em;
            transition: transform 0.3s ease;
        }
        
        .section h2.collapsed::after {
            transform: rotate(-90deg);
        }
        
        .section-buttons {
            display: flex;
            gap: 10px;
            margin-left: 20px;
        }
        
        .section-content {
            overflow: hidden;
            transition: max-height 0.3s ease, opacity 0.3s ease;
            max-height: 10000px;
            opacity: 1;
        }
        
        .section-content.collapsed {
            max-height: 0;
            opacity: 0;
            margin: 0;
        }
    
        
        .table {
            width: 100%;
            border-collapse: collapse;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            margin: 20px 0;
        }
        
        .table th,
        .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        .table th {
            background: #667eea;
            color: white;
            font-weight: bold;
        }
        
        .table tbody tr {
            transition: all 0.2s ease;
        }
        
        .table tbody tr:hover {
            background: #e8eaf6;
            transform: scale(1.01);
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.2);
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .stat-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .stat-label {
            font-size: 1.1em;
            opacity: 0.9;
        }
    
        
        .chart-container {
            position: relative;
            height: 400px;
            margin: 20px 0;
            overflow: hidden;
            background: white !important;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .chart-container canvas {
            display: block;
            margin: 0 auto;
            max-width: 100%;
            height: auto;
        }
        
        .chartjs-render-monitor {
            position: absolute !important;
            left: 0 !important;
            top: 0 !important;
            width: 100% !important;
            height: 100% !important;
        }
    
        
        .tutorial-panel {
            background: #f8f9fa;
            border-left: 5px solid #667eea;
            border-radius: 8px;
            padding: 25px;
            margin: 20px 0;
            display: none;
            animation: slideDown 0.3s ease;
        }
        
        .tutorial-panel.active {
            display: block;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .tutorial-explanation {
            margin-bottom: 25px;
        }
        
        .tutorial-explanation h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        
        .tutorial-explanation p {
            color: #555;
            line-height: 1.8;
            margin-bottom: 15px;
        }
        
        .tutorial-explanation strong {
            color: #667eea;
        }
        
        .code-tabs {
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .code-tabs-header {
            display: flex;
            background: #2d2d2d;
            border-bottom: 2px solid #667eea;
        }
        
        .code-tab-button {
            flex: 1;
            padding: 12px 20px;
            background: #2d2d2d;
            color: #999;
            border: none;
            cursor: pointer;
            font-size: 0.95em;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
        }
        
        .code-tab-button:hover {
            background: #3d3d3d;
            color: #ccc;
        }
        
        .code-tab-button.active {
            background: #3d3d3d;
            color: white;
        }
        
        .code-tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .code-tab-content {
            display: none;
            position: relative;
            background: transparent !important;
            border: none !important;
        }
        
        .code-tab-content.active {
            display: block;
        }
        
        .code-copy-button {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 600;
            z-index: 10;
            transition: all 0.3s ease;
        }
        
        .code-copy-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .code-copy-button.copied {
            background: linear-gradient(135deg, #43e97b 0%, #38d9a9 100%);
        }
        
        pre {
            background: transparent !important;
            border: none !important;
            padding: 0 !important;
            margin: 0 !important;
        }
        
        pre code {
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            background: transparent !important;
            padding: 15px !important;
            display: block;
        }
        
        body.dark-theme .code-tab-content {
            background: #2d2d2d !important;
            border-color: #404040 !important;
        }
    
        
        .control-buttons {
            background: #f8f9fa;
            padding: 15px 40px;
            text-align: center;
            border-bottom: 2px solid #e0e0e0;
            display: flex;
            justify-content: center;
            gap: 15px;
        }
        
        .control-btn {
            padding: 10px 25px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .control-btn:hover {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-tutorial {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .btn-tutorial:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .btn-copy {
            background: linear-gradient(135deg, #43e97b 0%, #38d9a9 100%);
            color: white;
        }
        
        .btn-copy:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(67, 233, 123, 0.4);
        }
        
        .btn-copy.copied {
            background: linear-gradient(135deg, #38d9a9 0%, #20c997 100%);
        }
    
        
        .loading-message {
            padding: 20px;
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            border-radius: 5px;
            color: #856404;
            margin: 10px 0;
        }
        
        .samples {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 5px solid #667eea;
        }
        
        .samples h3 {
            color: #667eea;
            margin-bottom: 10px;
        }
        
        .sample-text {
            background: white;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-size: 0.9em;
            line-height: 1.6;
            color: #555;
        }
    
        
        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .chart-container {
                height: 300px;
            }
            
            .section-header-wrapper {
                flex-direction: column;
                align-items: stretch;
            }
            
            .section-buttons {
                margin-left: 0;
                margin-top: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
        }
    
    </style>
    
</head>
<body>
    <div class="container">

        <div class="header">
            <h1>💰 Adult Income Dataset</h1>
            <div class="subtitle">Exploratory Data Analysis Report with Interactive Tutorials</div>
        </div>


        <div class="control-buttons">
            <button id="collapseAllBtn" class="control-btn">📦 Collapse All</button>
            <button id="expandAllBtn" class="control-btn">📂 Expand All</button>
            <span style="margin: 0 10px; color: #ccc;">|</span>
            <button id="themeToggleBtn" class="control-btn theme-toggle">
                <span id="themeIcon">☀️</span> <span id="themeText">Light Code</span>
            </button>
        </div>

        <div class="content">

            <!-- Methodology -->
            <div class="section">
                <h2>📚 Analysis Methodology</h2>
                <div class="section-content">
                <p style="color: #666; margin-bottom: 20px;">
                    This report analyzes tabular data (structured CSV format) with focus on data quality, 
                    feature distributions, and relationships. Different from text analysis, we examine:
                </p>
                
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px;">
                    <table class="table">
                        <thead>
                            <tr style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white;">
                                <th>Analysis Type</th>
                                <th>Purpose</th>
                                <th>Key Metrics</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><strong>Missing Values</strong></td>
                                <td>Data quality assessment</td>
                                <td><small>Missing %, Patterns, Imputation strategy</small></td>
                            </tr>
                            <tr style="background: #f8f9fa;">
                                <td><strong>Numerical Features</strong></td>
                                <td>Distribution & outliers</td>
                                <td><small>Mean, Median, Std, IQR, Outliers</small></td>
                            </tr>
                            <tr>
                                <td><strong>Categorical Features</strong></td>
                                <td>Category frequencies</td>
                                <td><small>Unique values, Mode, Cardinality</small></td>
                            </tr>
                            <tr style="background: #f8f9fa;">
                                <td><strong>Correlation</strong></td>
                                <td>Feature relationships</td>
                                <td><small>Pearson r, Multicollinearity</small></td>
                            </tr>
                            <tr>
                                <td><strong>Target Analysis</strong></td>
                                <td>Class balance & relationships</td>
                                <td><small>Distribution, Target vs features</small></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 15px; border-radius: 8px; margin-top: 20px;">
                    <strong>💡 Key Principle:</strong> Understand data quality and distributions BEFORE applying machine learning models.
                </div>
                </div>
            </div>


            <!-- Dataset Overview -->
            <div class="section">
                <h2>📊 Dataset Overview</h2>
                <div class="section-content">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value">32,561</div>
                        <div class="stat-label">Training Samples</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">16,281</div>
                        <div class="stat-label">Test Samples</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">14</div>
                        <div class="stat-label">Total Features</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">6</div>
                        <div class="stat-label">Numerical Features</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value">8</div>
                        <div class="stat-label">Categorical Features</div>
                    </div>
                </div>
                
                <h3 style="color: #667eea; margin-top: 30px; margin-bottom: 15px;">Target Variable: income</h3>
                <div class="stats-grid">

                    <div class="stat-card">
                        <div class="stat-value">24,720</div>
                        <div class="stat-label"><=50K (75.9%)</div>
                    </div>

                    <div class="stat-card">
                        <div class="stat-value">7,841</div>
                        <div class="stat-label">>50K (24.1%)</div>
                    </div>

                </div>
                </div>
            </div>


            <!-- Missing Values Analysis -->
            <div class="section" id="missing_values">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('missing_values')">🔍 Missing Values Analysis</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('missing_values')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('missing_values')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="missing_values-tutorial" class="tutorial-panel">
                        <div id="missing_values-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="missing_values-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="missing_values-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('missing_values', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('missing_values', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('missing_values', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="missing_values-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('missing_values', 'plotly')">📋 Copy</button>
                                <pre><code id="missing_values-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="missing_values-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('missing_values', 'matplotlib')">📋 Copy</button>
                                <pre><code id="missing_values-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="missing_values-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('missing_values', 'seaborn')">📋 Copy</button>
                                <pre><code id="missing_values-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="stats-grid" style="margin-bottom: 20px;">
                        <div class="stat-card">
                            <div class="stat-value">4,262</div>
                            <div class="stat-label">Total Missing Cells</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-value">3</div>
                            <div class="stat-label">Columns with Missing</div>
                        </div>
                    </div>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Missing Count</th>
                                <th>Missing %</th>
                                <th>Severity</th>
                            </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <td><strong>occupation</strong></td>
                            <td>1,843</td>
                            <td>5.66%</td>
                            <td>⚠️ Medium</td>
                        </tr>

                        <tr>
                            <td><strong>workclass</strong></td>
                            <td>1,836</td>
                            <td>5.64%</td>
                            <td>⚠️ Medium</td>
                        </tr>

                        <tr>
                            <td><strong>native_country</strong></td>
                            <td>583</td>
                            <td>1.79%</td>
                            <td>✓ Low</td>
                        </tr>

                        </tbody>
                    </table>
                    
                    <div class="chart-container"><canvas id="missingChart"></canvas></div>
                </div>
            </div>


            <!-- Numerical Features -->
            <div class="section" id="numerical_distributions">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('numerical_distributions')">📈 Numerical Features Distribution</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('numerical_distributions')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('numerical_distributions')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="numerical_distributions-tutorial" class="tutorial-panel">
                        <div id="numerical_distributions-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="numerical_distributions-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="numerical_distributions-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('numerical_distributions', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('numerical_distributions', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('numerical_distributions', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="numerical_distributions-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('numerical_distributions', 'plotly')">📋 Copy</button>
                                <pre><code id="numerical_distributions-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="numerical_distributions-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('numerical_distributions', 'matplotlib')">📋 Copy</button>
                                <pre><code id="numerical_distributions-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="numerical_distributions-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('numerical_distributions', 'seaborn')">📋 Copy</button>
                                <pre><code id="numerical_distributions-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="color: #667eea; margin-bottom: 15px;">Feature Statistics</h3>
                    <div class="stats-grid">

                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-label" style="font-size: 1.1em; margin-bottom: 10px;">Age</div>
                    <div style="font-size: 0.9em;">
                        Mean: 38.58<br>
                        Median: 37.00<br>
                        Std: 13.64
                    </div>
                </div>

                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-label" style="font-size: 1.1em; margin-bottom: 10px;">Fnlwgt</div>
                    <div style="font-size: 0.9em;">
                        Mean: 189778.37<br>
                        Median: 178356.00<br>
                        Std: 105549.98
                    </div>
                </div>

                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-label" style="font-size: 1.1em; margin-bottom: 10px;">Education Num</div>
                    <div style="font-size: 0.9em;">
                        Mean: 10.08<br>
                        Median: 10.00<br>
                        Std: 2.57
                    </div>
                </div>

                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-label" style="font-size: 1.1em; margin-bottom: 10px;">Capital Gain</div>
                    <div style="font-size: 0.9em;">
                        Mean: 1077.65<br>
                        Median: 0.00<br>
                        Std: 7385.29
                    </div>
                </div>

                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-label" style="font-size: 1.1em; margin-bottom: 10px;">Capital Loss</div>
                    <div style="font-size: 0.9em;">
                        Mean: 87.30<br>
                        Median: 0.00<br>
                        Std: 402.96
                    </div>
                </div>

                <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                    <div class="stat-label" style="font-size: 1.1em; margin-bottom: 10px;">Hours Per Week</div>
                    <div style="font-size: 0.9em;">
                        Mean: 40.44<br>
                        Median: 40.00<br>
                        Std: 12.35
                    </div>
                </div>

                    </div>
                    
                    <div id="numericalChartsContainer">
                        <!-- Charts will be populated by JavaScript -->
                    </div>
                </div>
            </div>


            <!-- Categorical Features -->
            <div class="section" id="categorical_distributions">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('categorical_distributions')">📊 Categorical Features Distribution</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('categorical_distributions')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('categorical_distributions')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="categorical_distributions-tutorial" class="tutorial-panel">
                        <div id="categorical_distributions-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="categorical_distributions-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="categorical_distributions-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('categorical_distributions', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('categorical_distributions', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('categorical_distributions', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="categorical_distributions-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('categorical_distributions', 'plotly')">📋 Copy</button>
                                <pre><code id="categorical_distributions-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="categorical_distributions-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('categorical_distributions', 'matplotlib')">📋 Copy</button>
                                <pre><code id="categorical_distributions-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="categorical_distributions-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('categorical_distributions', 'seaborn')">📋 Copy</button>
                                <pre><code id="categorical_distributions-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div id="categoricalChartsContainer">
                        <!-- Charts populated by JavaScript -->
                    </div>
                </div>
            </div>


            <!-- Target Distribution -->
            <div class="section" id="target_distribution">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('target_distribution')">🎯 Target Variable Distribution</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('target_distribution')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('target_distribution')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="target_distribution-tutorial" class="tutorial-panel">
                        <div id="target_distribution-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="target_distribution-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="target_distribution-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('target_distribution', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('target_distribution', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('target_distribution', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="target_distribution-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('target_distribution', 'plotly')">📋 Copy</button>
                                <pre><code id="target_distribution-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="target_distribution-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('target_distribution', 'matplotlib')">📋 Copy</button>
                                <pre><code id="target_distribution-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="target_distribution-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('target_distribution', 'seaborn')">📋 Copy</button>
                                <pre><code id="target_distribution-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-container"><canvas id="targetChart"></canvas></div>
                    
                    <table class="table" style="margin-top: 20px;">
                        <thead>
                            <tr>
                                <th>Class</th>
                                <th>Count</th>
                                <th>Percentage</th>
                            </tr>
                        </thead>
                        <tbody id="targetTableBody">
                            
                            <tr>
                                <td><strong><=50K</strong></td>
                                <td>24,720</td>
                                <td>75.92%</td>
                            </tr>

                            <tr>
                                <td><strong>>50K</strong></td>
                                <td>7,841</td>
                                <td>24.08%</td>
                            </tr>

                        </tbody>
                    </table>
                </div>
            </div>


            <!-- Correlation Analysis -->
            <div class="section" id="correlation_analysis">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('correlation_analysis')">🔗 Correlation Analysis</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('correlation_analysis')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('correlation_analysis')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="correlation_analysis-tutorial" class="tutorial-panel">
                        <div id="correlation_analysis-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="correlation_analysis-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="correlation_analysis-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('correlation_analysis', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('correlation_analysis', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('correlation_analysis', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="correlation_analysis-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('correlation_analysis', 'plotly')">📋 Copy</button>
                                <pre><code id="correlation_analysis-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="correlation_analysis-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('correlation_analysis', 'matplotlib')">📋 Copy</button>
                                <pre><code id="correlation_analysis-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="correlation_analysis-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('correlation_analysis', 'seaborn')">📋 Copy</button>
                                <pre><code id="correlation_analysis-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div id="correlationHeatmap" style="width:100%; height:600px; margin: 20px 0;"></div>
                </div>
            </div>


            <!-- Outlier Detection -->
            <div class="section" id="outlier_detection">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('outlier_detection')">📦 Outlier Detection (IQR Method)</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('outlier_detection')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('outlier_detection')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="outlier_detection-tutorial" class="tutorial-panel">
                        <div id="outlier_detection-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="outlier_detection-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="outlier_detection-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('outlier_detection', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('outlier_detection', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('outlier_detection', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="outlier_detection-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('outlier_detection', 'plotly')">📋 Copy</button>
                                <pre><code id="outlier_detection-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="outlier_detection-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('outlier_detection', 'matplotlib')">📋 Copy</button>
                                <pre><code id="outlier_detection-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="outlier_detection-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('outlier_detection', 'seaborn')">📋 Copy</button>
                                <pre><code id="outlier_detection-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Feature</th>
                                <th>Outlier Count</th>
                                <th>Percentage</th>
                                <th>Severity</th>
                                <th>Valid Range (IQR)</th>
                            </tr>
                        </thead>
                        <tbody>

                        <tr>
                            <td><strong>Age</strong></td>
                            <td>143</td>
                            <td>0.44%</td>
                            <td>✓ Low</td>
                            <td>[-2.00, 78.00]</td>
                        </tr>

                        <tr>
                            <td><strong>Fnlwgt</strong></td>
                            <td>992</td>
                            <td>3.05%</td>
                            <td>⚠️ Medium</td>
                            <td>[-61009.00, 415887.00]</td>
                        </tr>

                        <tr>
                            <td><strong>Education Num</strong></td>
                            <td>1,198</td>
                            <td>3.68%</td>
                            <td>⚠️ Medium</td>
                            <td>[4.50, 16.50]</td>
                        </tr>

                        <tr>
                            <td><strong>Capital Gain</strong></td>
                            <td>2,712</td>
                            <td>8.33%</td>
                            <td>⚠️ High</td>
                            <td>[0.00, 0.00]</td>
                        </tr>

                        <tr>
                            <td><strong>Capital Loss</strong></td>
                            <td>1,519</td>
                            <td>4.67%</td>
                            <td>⚠️ Medium</td>
                            <td>[0.00, 0.00]</td>
                        </tr>

                        <tr>
                            <td><strong>Hours Per Week</strong></td>
                            <td>9,008</td>
                            <td>27.66%</td>
                            <td>⚠️ High</td>
                            <td>[32.50, 52.50]</td>
                        </tr>

                        </tbody>
                    </table>
                    
                    <div id="outlierChartsContainer">
                        <!-- Box plots populated by JavaScript -->
                    </div>
                </div>
            </div>


            <!-- Target vs Features -->
            <div class="section" id="target_vs_features">
                <div class="section-header-wrapper">
                    <h2 onclick="toggleSection('target_vs_features')">🎯 Target vs Categorical Features</h2>
                    <div class="section-buttons">
                        <button class="btn btn-tutorial" onclick="toggleTutorial('target_vs_features')">
                            📚 Tutorial
                        </button>
                        <button class="btn btn-copy" onclick="copyCodeQuick('target_vs_features')">
                            📋 Copy Code
                        </button>
                    </div>
                </div>
                
                <div class="section-content">
                    <!-- Tutorial Panel -->
                    <div id="target_vs_features-tutorial" class="tutorial-panel">
                        <div id="target_vs_features-loading" class="loading-message">
                            ⏳ Loading tutorial content...
                        </div>
                        <div id="target_vs_features-explanation" class="tutorial-explanation" style="display:none;"></div>
                        
                        <div class="code-tabs" id="target_vs_features-code-tabs" style="display:none;">
                            <div class="code-tabs-header">
                                <button class="code-tab-button active" onclick="switchTab('target_vs_features', 'plotly')">Plotly</button>
                                <button class="code-tab-button" onclick="switchTab('target_vs_features', 'matplotlib')">Matplotlib</button>
                                <button class="code-tab-button" onclick="switchTab('target_vs_features', 'seaborn')">Seaborn</button>
                            </div>
                            
                            <div id="target_vs_features-plotly" class="code-tab-content active">
                                <button class="code-copy-button" onclick="copyCodeBlock('target_vs_features', 'plotly')">📋 Copy</button>
                                <pre><code id="target_vs_features-plotly-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="target_vs_features-matplotlib" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('target_vs_features', 'matplotlib')">📋 Copy</button>
                                <pre><code id="target_vs_features-matplotlib-code" class="language-python"></code></pre>
                            </div>
                            
                            <div id="target_vs_features-seaborn" class="code-tab-content">
                                <button class="code-copy-button" onclick="copyCodeBlock('target_vs_features', 'seaborn')">📋 Copy</button>
                                <pre><code id="target_vs_features-seaborn-code" class="language-python"></code></pre>
                            </div>
                        </div>
                    </div>
                    
                    <div id="targetVsFeaturesContainer">
                        <!-- Charts populated by JavaScript -->
                    </div>
                </div>
            </div>


            <!-- Sample Rows -->
            <div class="section">
                <h2>📝 Sample Data Rows</h2>
                <div class="section-content">

                <div class="samples">
                    <h3><=50K</h3>

                    <div class="sample-text">
                        <strong>Sample 1:</strong><br><strong>age:</strong> 39<br><strong>workclass:</strong> State-gov<br><strong>fnlwgt:</strong> 77516<br><strong>education:</strong> Bachelors<br><strong>education_num:</strong> 13<br><strong>marital_status:</strong> Never-married<br><strong>occupation:</strong> Adm-clerical<br><strong>relationship:</strong> Not-in-family
                    </div>

                    <div class="sample-text">
                        <strong>Sample 2:</strong><br><strong>age:</strong> 50<br><strong>workclass:</strong> Self-emp-not-inc<br><strong>fnlwgt:</strong> 83311<br><strong>education:</strong> Bachelors<br><strong>education_num:</strong> 13<br><strong>marital_status:</strong> Married-civ-spouse<br><strong>occupation:</strong> Exec-managerial<br><strong>relationship:</strong> Husband
                    </div>

                    <div class="sample-text">
                        <strong>Sample 3:</strong><br><strong>age:</strong> 38<br><strong>workclass:</strong> Private<br><strong>fnlwgt:</strong> 215646<br><strong>education:</strong> HS-grad<br><strong>education_num:</strong> 9<br><strong>marital_status:</strong> Divorced<br><strong>occupation:</strong> Handlers-cleaners<br><strong>relationship:</strong> Not-in-family
                    </div>

                </div>

                <div class="samples">
                    <h3>>50K</h3>

                    <div class="sample-text">
                        <strong>Sample 1:</strong><br><strong>age:</strong> 52<br><strong>workclass:</strong> Self-emp-not-inc<br><strong>fnlwgt:</strong> 209642<br><strong>education:</strong> HS-grad<br><strong>education_num:</strong> 9<br><strong>marital_status:</strong> Married-civ-spouse<br><strong>occupation:</strong> Exec-managerial<br><strong>relationship:</strong> Husband
                    </div>

                    <div class="sample-text">
                        <strong>Sample 2:</strong><br><strong>age:</strong> 31<br><strong>workclass:</strong> Private<br><strong>fnlwgt:</strong> 45781<br><strong>education:</strong> Masters<br><strong>education_num:</strong> 14<br><strong>marital_status:</strong> Never-married<br><strong>occupation:</strong> Prof-specialty<br><strong>relationship:</strong> Not-in-family
                    </div>

                    <div class="sample-text">
                        <strong>Sample 3:</strong><br><strong>age:</strong> 42<br><strong>workclass:</strong> Private<br><strong>fnlwgt:</strong> 159449<br><strong>education:</strong> Bachelors<br><strong>education_num:</strong> 13<br><strong>marital_status:</strong> Married-civ-spouse<br><strong>occupation:</strong> Exec-managerial<br><strong>relationship:</strong> Husband
                    </div>

                </div>

                </div>
            </div>


            <!-- Key Insights -->
            <div class="section">
                <h2>💡 Key Insights</h2>
                <div class="section-content">
                <div class="samples">
                    <h3>Dataset Characteristics</h3>
                    <ul style="padding-left: 20px; line-height: 2;">
<li>Dataset contains 48,842 samples with 14 features</li>
<li>⚠️ Imbalanced dataset: <=50K (75.9%) vs >50K (24.1%) - ratio 3.2:1</li>
<li>⚠️ Found missing values in 3 columns</li>
<li>  • occupation: 1,843 missing (5.66%)</li>
<li>  • workclass: 1,836 missing (5.64%)</li>
<li>  • native_country: 583 missing (1.79%)</li>
<li>  💡 Suggestion: Use mode/median imputation for columns with <5% missing</li>
<li>⚠️ Detected 15572 outliers across 6 features</li>
<li>  • hours_per_week: 9008 outliers (27.66%)</li>
<li>  • capital_gain: 2712 outliers (8.33%)</li>
<li>  • capital_loss: 1519 outliers (4.67%)</li>
<li>  💡 Suggestion: Investigate features with >5% outliers - may need capping or transformation</li>
<li>No high correlations found (|r| > 0.7) - features are relatively independent</li>
                    </ul>
                </div>
                </div>
            </div>

        </div>

        <div class="footer">
            <p><strong>Adult Income Dataset - EDA Report with Interactive Tutorials</strong></p>
            <p style="margin-top: 10px; font-size: 0.9em;">
                Developed by Thanh-Sach LE with AI Assistance<br>
                Dataset Source: UCI Machine Learning Repository (CC BY 4.0)
            </p>
        </div>

    </div>

    <!-- Embedded Code Examples -->
    <script id="embedded-code-examples" type="application/json">
{
  "dataset_overview": {
    "title": "Dataset Overview",
    "explanation": {
      "what": "Dataset overview provides a high-level summary: number of samples, features, data types, and target distribution.",
      "why": "Understanding dataset structure is the first step in EDA. It helps identify what kind of analysis is needed and potential challenges.",
      "how": "Check for balanced/imbalanced targets, identify numerical vs categorical features, and understand dataset size for memory planning."
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\n\n# Load data from GitHub\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Basic info\nprint(f\"Dataset shape: {df.shape}\")\nprint(f\"Total samples: {len(df):,}\")\nprint(f\"Total features: {len(df.columns)}\")\nprint(f\"\\nFeatures: {list(df.columns)}\")\n\n# Data types\nprint(f\"\\nData types:\")\nprint(df.dtypes)\n\n# Target distribution\ntarget_dist = df['income'].value_counts()\nprint(f\"\\nTarget distribution:\")\nprint(target_dist)\n\n# Create pie chart for target\nfig = go.Figure(data=[go.Pie(\n    labels=target_dist.index,\n    values=target_dist.values,\n    hole=0.3,\n    marker=dict(colors=['#667eea', '#f093fb']),\n    textinfo='label+percent+value',\n    textfont_size=14\n)])\n\nfig.update_layout(\n    title='Income Distribution',\n    showlegend=True,\n    width=600,\n    height=400\n)\n\nfig.show()",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Basic info\nprint(f\"Dataset shape: {df.shape}\")\nprint(f\"Total samples: {len(df):,}\")\nprint(df.info())\n\n# Target distribution pie chart\ntarget_dist = df['income'].value_counts()\n\nfig, ax = plt.subplots(figsize=(8, 6))\ncolors = ['#667eea', '#f093fb']\n\nwedges, texts, autotexts = ax.pie(\n    target_dist.values,\n    labels=target_dist.index,\n    autopct='%1.1f%%',\n    colors=colors,\n    startangle=90\n)\n\nfor autotext in autotexts:\n    autotext.set_color('white')\n    autotext.set_fontweight('bold')\n\nax.set_title('Income Distribution', fontsize=16, pad=20)\nplt.tight_layout()\nplt.show()",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Summary statistics\nprint(df.describe())\nprint(f\"\\nDataset shape: {df.shape}\")\n\n# Target distribution bar plot\nfig, ax = plt.subplots(figsize=(8, 6))\n\ntarget_dist = df['income'].value_counts()\nsns.barplot(x=target_dist.index, y=target_dist.values, \n           palette=['#667eea', '#f093fb'], ax=ax)\n\nax.set_title('Income Distribution', fontsize=16, pad=20)\nax.set_xlabel('Income Class', fontsize=12)\nax.set_ylabel('Count', fontsize=12)\n\n# Add value labels\nfor i, v in enumerate(target_dist.values):\n    ax.text(i, v + 500, f'{v:,}', ha='center', fontweight='bold')\n\nplt.tight_layout()\nplt.show()"
  },
  "missing_values": {
    "title": "Missing Values Analysis",
    "explanation": {
      "what": "Missing values analysis identifies which features have missing data, how much is missing, and patterns in missingness.",
      "why": "Missing data can bias results and reduce statistical power. Understanding missing patterns helps choose appropriate imputation strategies.",
      "how": "Check missing percentage per feature. <5% = simple imputation, 5-30% = advanced methods, >50% = consider dropping. Look for patterns (MAR, MCAR, MNAR)."
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Calculate missing values\nmissing_counts = df.isnull().sum()\nmissing_pct = (df.isnull().sum() / len(df) * 100)\n\n# Filter columns with missing values\nmissing_df = pd.DataFrame({\n    'column': missing_counts[missing_counts > 0].index,\n    'count': missing_counts[missing_counts > 0].values,\n    'percentage': missing_pct[missing_counts > 0].values\n}).sort_values('percentage', ascending=False)\n\nprint(\"Missing Values Summary:\")\nprint(missing_df)\n\n# Create bar chart\nfig = go.Figure(data=[go.Bar(\n    x=missing_df['column'],\n    y=missing_df['percentage'],\n    marker_color='#f093fb',\n    text=[f\"{p:.2f}%\" for p in missing_df['percentage']],\n    textposition='outside'\n)])\n\nfig.update_layout(\n    title='Missing Values by Feature (%)',\n    xaxis_title='Features',\n    yaxis_title='Missing Percentage',\n    width=800,\n    height=400\n)\n\nfig.show()\n\n# Imputation recommendations\nprint(\"\\n💡 Recommendations:\")\nfor _, row in missing_df.iterrows():\n    col, pct = row['column'], row['percentage']\n    if pct > 50:\n        print(f\"  {col}: {pct:.1f}% missing → Consider dropping\")\n    elif pct > 5:\n        print(f\"  {col}: {pct:.1f}% missing → Use advanced imputation (KNN, iterative)\")\n    else:\n        print(f\"  {col}: {pct:.1f}% missing → Simple imputation (mode/median)\")",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Calculate missing values\nmissing_counts = df.isnull().sum()\nmissing_pct = (missing_counts / len(df) * 100)\n\n# Filter and sort\nmissing_data = missing_pct[missing_pct > 0].sort_values(ascending=False)\n\n# Create bar chart\nfig, ax = plt.subplots(figsize=(10, 6))\nax.bar(missing_data.index, missing_data.values, color='#f093fb', alpha=0.7)\n\nax.set_title('Missing Values by Feature', fontsize=16, pad=20)\nax.set_xlabel('Features', fontsize=12)\nax.set_ylabel('Missing Percentage (%)', fontsize=12)\nax.grid(axis='y', alpha=0.3)\n\n# Add value labels\nfor i, (col, pct) in enumerate(missing_data.items()):\n    ax.text(i, pct + 0.2, f'{pct:.2f}%', ha='center', fontweight='bold')\n\nplt.xticks(rotation=45, ha='right')\nplt.tight_layout()\nplt.show()\n\n# Print summary\nprint(f\"\\nTotal missing values: {missing_counts.sum():,}\")\nprint(f\"Columns with missing: {len(missing_data)}\")",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Missing values heatmap (sample of data)\nfig, ax = plt.subplots(figsize=(12, 8))\n\n# Sample rows for visualization\nsample_df = df.sample(min(1000, len(df)), random_state=42)\n\n# Create mask for missing values\nsns.heatmap(sample_df.isnull(), \n           cbar=True,\n           cmap='viridis',\n           yticklabels=False,\n           ax=ax)\n\nax.set_title('Missing Values Pattern (sample of 1000 rows)', fontsize=16, pad=20)\nax.set_xlabel('Features', fontsize=12)\nplt.xticks(rotation=45, ha='right')\nplt.tight_layout()\nplt.show()\n\n# Missing percentage\nmissing_pct = (df.isnull().sum() / len(df) * 100).sort_values(ascending=False)\nprint(\"\\nMissing Percentage:\")\nprint(missing_pct[missing_pct > 0])"
  },
  "numerical_distributions": {
    "title": "Numerical Feature Distributions",
    "explanation": {
      "what": "Distribution analysis shows how numerical values are spread: normal, skewed, bimodal, etc. Includes histograms, KDE plots, and box plots.",
      "why": "Understanding distributions helps choose preprocessing (scaling, transformation), detect outliers, and select appropriate models.",
      "how": "Look for shape (normal, skewed), outliers (box plot whiskers), and range. Right-skewed data may need log transformation. Outliers may need capping or removal."
    },
    "plotly": "import pandas as pd\nimport plotly.express as px\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select a numerical feature\nfeature = 'age'  # Change to: age, education_num, capital_gain, hours_per_week\n\n# Create histogram with KDE\nfig = go.Figure()\n\nfig.add_trace(go.Histogram(\n    x=df[feature],\n    nbinsx=30,\n    name='Distribution',\n    marker_color='#667eea',\n    opacity=0.7\n))\n\nfig.update_layout(\n    title=f'{feature.replace(\"_\", \" \").title()} Distribution',\n    xaxis_title=feature.replace('_', ' ').title(),\n    yaxis_title='Count',\n    width=800,\n    height=400,\n    showlegend=True\n)\n\nfig.show()\n\n# Statistics\nprint(f\"\\n{feature} Statistics:\")\nprint(f\"  Mean: {df[feature].mean():.2f}\")\nprint(f\"  Median: {df[feature].median():.2f}\")\nprint(f\"  Std: {df[feature].std():.2f}\")\nprint(f\"  Min: {df[feature].min()}\")\nprint(f\"  Max: {df[feature].max()}\")\n\n# Box plot for outliers\nfig2 = go.Figure()\n\nfig2.add_trace(go.Box(\n    y=df[feature],\n    name=feature,\n    marker_color='#764ba2',\n    boxmean='sd'  # Show mean and std\n))\n\nfig2.update_layout(\n    title=f'{feature.replace(\"_\", \" \").title()} - Box Plot (Outlier Detection)',\n    yaxis_title=feature.replace('_', ' ').title(),\n    width=600,\n    height=500\n)\n\nfig2.show()",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Analyze all numerical features\nnumerical_cols = ['age', 'fnlwgt', 'education_num', 'capital_gain', \n                  'capital_loss', 'hours_per_week']\n\nfig, axes = plt.subplots(2, 3, figsize=(15, 10))\nfig.suptitle('Numerical Features Distribution', fontsize=16, y=0.995)\n\nfor idx, col in enumerate(numerical_cols):\n    ax = axes[idx // 3, idx % 3]\n    \n    # Histogram\n    ax.hist(df[col].dropna(), bins=30, color='#667eea', alpha=0.7, edgecolor='black')\n    ax.set_title(col.replace('_', ' ').title(), fontsize=12, fontweight='bold')\n    ax.set_xlabel(col.replace('_', ' ').title())\n    ax.set_ylabel('Frequency')\n    ax.grid(axis='y', alpha=0.3)\n    \n    # Add mean line\n    mean_val = df[col].mean()\n    ax.axvline(mean_val, color='red', linestyle='--', \n              linewidth=2, label=f'Mean: {mean_val:.1f}')\n    ax.legend(fontsize=8)\n\nplt.tight_layout()\nplt.show()\n\n# Print statistics\nprint(\"\\nNumerical Features Statistics:\")\nprint(df[numerical_cols].describe())",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select numerical features\nnumerical_cols = ['age', 'education_num', 'capital_gain', 'hours_per_week']\n\n# Create distribution plots with KDE\nfig, axes = plt.subplots(2, 2, figsize=(12, 10))\nfig.suptitle('Numerical Features Distribution with KDE', fontsize=16)\n\nfor idx, col in enumerate(numerical_cols):\n    ax = axes[idx // 2, idx % 2]\n    \n    sns.histplot(data=df, x=col, kde=True, color='#667eea', ax=ax)\n    ax.set_title(col.replace('_', ' ').title(), fontsize=12, fontweight='bold')\n    ax.set_xlabel(col.replace('_', ' ').title())\n    ax.grid(axis='y', alpha=0.3)\n\nplt.tight_layout()\nplt.show()\n\n# Box plots for outlier detection\nfig, axes = plt.subplots(2, 2, figsize=(12, 10))\nfig.suptitle('Box Plots - Outlier Detection', fontsize=16)\n\nfor idx, col in enumerate(numerical_cols):\n    ax = axes[idx // 2, idx % 2]\n    \n    sns.boxplot(y=df[col], color='#764ba2', ax=ax)\n    ax.set_title(col.replace('_', ' ').title(), fontsize=12, fontweight='bold')\n    ax.grid(axis='y', alpha=0.3)\n\nplt.tight_layout()\nplt.show()"
  },
  "categorical_distributions": {
    "title": "Categorical Feature Distributions",
    "explanation": {
      "what": "Categorical distribution shows frequency of each category value. Reveals cardinality (number of unique values) and class balance.",
      "why": "High cardinality (many unique values) requires different encoding strategies. Imbalanced categories may need special handling.",
      "how": "Check unique value counts. Low cardinality (<10) → One-Hot Encoding. High cardinality (>50) → Target Encoding or Frequency Encoding. Rare categories (<1%) may need grouping."
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select a categorical feature\nfeature = 'workclass'  # Change to: education, marital_status, occupation, etc.\n\n# Get value counts\nvalue_counts = df[feature].value_counts()\n\n# Create bar chart\nfig = go.Figure(data=[go.Bar(\n    x=value_counts.index,\n    y=value_counts.values,\n    marker_color='#4facfe',\n    text=value_counts.values,\n    textposition='outside'\n)])\n\nfig.update_layout(\n    title=f'{feature.replace(\"_\", \" \").title()} Distribution',\n    xaxis_title=feature.replace('_', ' ').title(),\n    yaxis_title='Count',\n    width=900,\n    height=500,\n    xaxis={'tickangle': 45}\n)\n\nfig.show()\n\n# Print statistics\nprint(f\"\\n{feature} Statistics:\")\nprint(f\"  Unique values: {df[feature].nunique()}\")\nprint(f\"  Missing: {df[feature].isnull().sum()} ({df[feature].isnull().sum()/len(df)*100:.2f}%)\")\nprint(f\"\\nTop categories:\")\nfor cat, count in value_counts.head(10).items():\n    print(f\"  {cat}: {count:,} ({count/len(df)*100:.2f}%)\")",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Analyze all categorical features\ncategorical_cols = ['workclass', 'education', 'marital_status', 'occupation']\n\nfig, axes = plt.subplots(2, 2, figsize=(14, 10))\nfig.suptitle('Categorical Features Distribution', fontsize=16, y=0.995)\n\nfor idx, col in enumerate(categorical_cols):\n    ax = axes[idx // 2, idx % 2]\n    \n    value_counts = df[col].value_counts().head(10)\n    \n    ax.barh(value_counts.index, value_counts.values, color='#4facfe', alpha=0.7)\n    ax.set_title(col.replace('_', ' ').title(), fontsize=12, fontweight='bold')\n    ax.set_xlabel('Count')\n    ax.invert_yaxis()\n    ax.grid(axis='x', alpha=0.3)\n    \n    # Add unique count\n    ax.text(0.02, 0.98, f'Unique: {df[col].nunique()}', \n           transform=ax.transAxes, va='top', fontsize=9,\n           bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.5))\n\nplt.tight_layout()\nplt.show()",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select feature\nfeature = 'education'  # Change to other categorical features\n\n# Get top 15 categories\nvalue_counts = df[feature].value_counts().head(15)\n\n# Create bar plot\nfig, ax = plt.subplots(figsize=(10, 8))\n\nsns.barplot(y=value_counts.index, x=value_counts.values, \n           color='#4facfe', ax=ax)\n\nax.set_title(f'{feature.replace(\"_\", \" \").title()} Distribution', \n            fontsize=14, fontweight='bold')\nax.set_xlabel('Count', fontsize=12)\nax.set_ylabel(feature.replace('_', ' ').title(), fontsize=12)\nax.grid(axis='x', alpha=0.3)\n\n# Add percentages\ntotal = value_counts.sum()\nfor i, v in enumerate(value_counts.values):\n    ax.text(v + 50, i, f'{v:,} ({v/total*100:.1f}%)', \n           va='center', fontsize=9)\n\nplt.tight_layout()\nplt.show()\n\n# Cardinality info\nprint(f\"\\nCardinality: {df[feature].nunique()} unique values\")\nprint(f\"Missing: {df[feature].isnull().sum()} ({df[feature].isnull().sum()/len(df)*100:.2f}%)\")"
  },
  "target_distribution": {
    "title": "Target Variable Analysis",
    "explanation": {
      "what": "Target distribution shows class balance and target characteristics. Critical for understanding what you're predicting.",
      "why": "Imbalanced targets require special handling: class weights, resampling (SMOTE, undersampling), or different evaluation metrics (F1, ROC-AUC instead of accuracy).",
      "how": "Check class ratio. Balanced = 40:60 to 50:50. Imbalanced = >2:1 ratio. Highly imbalanced = >10:1. Use stratified sampling and appropriate metrics."
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Target distribution\ntarget_counts = df['income'].value_counts()\n\n# Create pie chart\nfig = go.Figure(data=[go.Pie(\n    labels=target_counts.index,\n    values=target_counts.values,\n    hole=0.35,\n    marker=dict(colors=['#667eea', '#f093fb']),\n    textinfo='label+percent+value',\n    textfont_size=14\n)])\n\nfig.update_layout(\n    title='Income Distribution (Target Variable)',\n    showlegend=True,\n    width=600,\n    height=400\n)\n\nfig.show()\n\n# Print statistics\nprint(\"Target Distribution:\")\nfor label, count in target_counts.items():\n    pct = count / len(df) * 100\n    print(f\"  {label}: {count:,} ({pct:.2f}%)\")\n\n# Imbalance ratio\nmajority = target_counts.max()\nminority = target_counts.min()\nratio = majority / minority\nprint(f\"\\nImbalance Ratio: {ratio:.2f}:1\")\nif ratio > 2:\n    print(\"⚠️ Dataset is imbalanced - consider using class weights or resampling\")\nelse:\n    print(\"✅ Dataset is relatively balanced\")",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Target distribution\ntarget_counts = df['income'].value_counts()\n\n# Create figure with 2 subplots\nfig, (ax1, ax2) = plt.subplots(1, 2, figsize=(12, 5))\n\n# Pie chart\ncolors = ['#667eea', '#f093fb']\nax1.pie(target_counts.values, labels=target_counts.index, autopct='%1.1f%%',\n       colors=colors, startangle=90)\nax1.set_title('Income Distribution (Pie Chart)', fontsize=14, fontweight='bold')\n\n# Bar chart\nax2.bar(target_counts.index, target_counts.values, color=colors, alpha=0.7)\nax2.set_title('Income Distribution (Bar Chart)', fontsize=14, fontweight='bold')\nax2.set_ylabel('Count')\nax2.grid(axis='y', alpha=0.3)\n\n# Add value labels\nfor i, (label, count) in enumerate(target_counts.items()):\n    ax2.text(i, count + 500, f'{count:,}', ha='center', fontweight='bold')\n\nplt.tight_layout()\nplt.show()\n\n# Print imbalance ratio\nratio = target_counts.max() / target_counts.min()\nprint(f\"\\nImbalance Ratio: {ratio:.2f}:1\")",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Target distribution\ntarget_counts = df['income'].value_counts()\n\n# Count plot\nfig, ax = plt.subplots(figsize=(8, 6))\n\nsns.countplot(data=df, x='income', palette=['#667eea', '#f093fb'], ax=ax)\n\nax.set_title('Income Distribution', fontsize=16, fontweight='bold', pad=20)\nax.set_xlabel('Income Class', fontsize=12)\nax.set_ylabel('Count', fontsize=12)\nax.grid(axis='y', alpha=0.3)\n\n# Add percentage labels\ntotal = len(df)\nfor i, p in enumerate(ax.patches):\n    height = p.get_height()\n    pct = height / total * 100\n    ax.text(p.get_x() + p.get_width()/2., height + 500,\n           f'{int(height):,}\\n({pct:.1f}%)',\n           ha='center', fontweight='bold')\n\nplt.tight_layout()\nplt.show()"
  },
  "correlation_analysis": {
    "title": "Correlation Analysis",
    "explanation": {
      "what": "Correlation measures linear relationships between numerical features. Values range from -1 (perfect negative) to +1 (perfect positive).",
      "why": "High correlations indicate redundancy (multicollinearity). One feature may be sufficient, reducing model complexity and preventing overfitting.",
      "how": "Heatmap shows all pairwise correlations. |r| > 0.7 = high correlation (consider removing one). |r| < 0.3 = weak/no correlation. Use for feature selection."
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select numerical features\nnumerical_cols = ['age', 'fnlwgt', 'education_num', 'capital_gain', \n                  'capital_loss', 'hours_per_week']\n\n# Compute correlation matrix\ncorr_matrix = df[numerical_cols].corr()\n\n# Create heatmap\nfig = go.Figure(data=go.Heatmap(\n    z=corr_matrix.values,\n    x=corr_matrix.columns,\n    y=corr_matrix.columns,\n    colorscale='RdBu_r',\n    zmid=0,\n    text=corr_matrix.values,\n    texttemplate='%{text:.2f}',\n    textfont={\"size\": 10},\n    colorbar=dict(title=\"Correlation\")\n))\n\nfig.update_layout(\n    title='Correlation Matrix - Numerical Features',\n    width=700,\n    height=600,\n    xaxis={'tickangle': 45}\n)\n\nfig.show()\n\n# Print high correlations\nprint(\"\\nHigh Correlations (|r| > 0.5):\")\nfor i in range(len(numerical_cols)):\n    for j in range(i+1, len(numerical_cols)):\n        corr = corr_matrix.iloc[i, j]\n        if abs(corr) > 0.5:\n            print(f\"  {numerical_cols[i]} ↔ {numerical_cols[j]}: r = {corr:.3f}\")",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Numerical features\nnumerical_cols = ['age', 'fnlwgt', 'education_num', 'capital_gain', \n                  'capital_loss', 'hours_per_week']\n\n# Correlation matrix\ncorr_matrix = df[numerical_cols].corr()\n\n# Create heatmap\nfig, ax = plt.subplots(figsize=(10, 8))\nim = ax.imshow(corr_matrix, cmap='RdBu_r', aspect='auto', vmin=-1, vmax=1)\n\n# Set ticks and labels\nax.set_xticks(np.arange(len(numerical_cols)))\nax.set_yticks(np.arange(len(numerical_cols)))\nax.set_xticklabels(numerical_cols)\nax.set_yticklabels(numerical_cols)\n\nplt.setp(ax.get_xticklabels(), rotation=45, ha=\"right\")\n\n# Add colorbar\ncbar = plt.colorbar(im, ax=ax)\ncbar.set_label('Correlation Coefficient', rotation=270, labelpad=20)\n\n# Add correlation values\nfor i in range(len(numerical_cols)):\n    for j in range(len(numerical_cols)):\n        text = ax.text(j, i, f'{corr_matrix.iloc[i, j]:.2f}',\n                      ha=\"center\", va=\"center\",\n                      color=\"white\" if abs(corr_matrix.iloc[i, j]) > 0.5 else \"black\",\n                      fontsize=9, fontweight='bold')\n\nax.set_title('Correlation Matrix', fontsize=16, pad=20)\nplt.tight_layout()\nplt.show()",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Numerical features\nnumerical_cols = ['age', 'fnlwgt', 'education_num', 'capital_gain', \n                  'capital_loss', 'hours_per_week']\n\n# Correlation matrix\ncorr_matrix = df[numerical_cols].corr()\n\n# Create heatmap with seaborn\nfig, ax = plt.subplots(figsize=(10, 8))\n\nsns.heatmap(corr_matrix,\n           annot=True,\n           fmt='.2f',\n           cmap='RdBu_r',\n           center=0,\n           square=True,\n           linewidths=0.5,\n           cbar_kws={'label': 'Correlation Coefficient'},\n           ax=ax)\n\nax.set_title('Correlation Matrix - Numerical Features', fontsize=16, pad=20)\nplt.tight_layout()\nplt.show()\n\n# Pair plot (select top features)\ntop_features = ['age', 'education_num', 'hours_per_week']\nsns.pairplot(df[top_features + ['income']], hue='income', \n            palette={'<=50K': '#667eea', '>50K': '#f093fb'},\n            diag_kind='kde', plot_kws={'alpha': 0.6})\nplt.suptitle('Pair Plot - Selected Features', y=1.01)\nplt.show()"
  },
  "outlier_detection": {
    "title": "Outlier Detection",
    "explanation": {
      "what": "Outliers are data points that significantly differ from other observations. Can be errors or rare but valid cases.",
      "why": "Outliers can skew statistics, bias models, and affect predictions. Identifying them helps decide: keep, remove, or cap.",
      "how": "IQR method: values beyond Q1-1.5*IQR or Q3+1.5*IQR. Z-score: |z| > 3. Box plots visualize outliers. Investigate before removing - may be informative!"
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\nfrom plotly.subplots import make_subplots\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select features with potential outliers\nfeatures = ['age', 'capital_gain', 'hours_per_week']\n\n# Create box plots\nfig = make_subplots(\n    rows=1, cols=3,\n    subplot_titles=[f.replace('_', ' ').title() for f in features]\n)\n\ncolors = ['#667eea', '#f093fb', '#43e97b']\n\nfor idx, (feature, color) in enumerate(zip(features, colors), 1):\n    fig.add_trace(\n        go.Box(y=df[feature], name=feature, marker_color=color, boxmean='sd'),\n        row=1, col=idx\n    )\n\nfig.update_layout(\n    title_text='Outlier Detection - Box Plots',\n    showlegend=False,\n    height=400,\n    width=1200\n)\n\nfig.show()\n\n# IQR method for one feature\nfeature = 'capital_gain'\nQ1 = df[feature].quantile(0.25)\nQ3 = df[feature].quantile(0.75)\nIQR = Q3 - Q1\n\nlower_bound = Q1 - 1.5 * IQR\nupper_bound = Q3 + 1.5 * IQR\n\noutliers = df[(df[feature] < lower_bound) | (df[feature] > upper_bound)]\n\nprint(f\"\\n{feature} - IQR Outlier Detection:\")\nprint(f\"  Q1: {Q1:.2f}, Q3: {Q3:.2f}, IQR: {IQR:.2f}\")\nprint(f\"  Bounds: [{lower_bound:.2f}, {upper_bound:.2f}]\")\nprint(f\"  Outliers: {len(outliers)} ({len(outliers)/len(df)*100:.2f}%)\")\nprint(f\"  Outlier range: [{outliers[feature].min():.2f}, {outliers[feature].max():.2f}]\")",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Create box plots for all numerical features\nnumerical_cols = ['age', 'education_num', 'capital_gain', \n                  'capital_loss', 'hours_per_week']\n\nfig, axes = plt.subplots(1, 5, figsize=(16, 5))\nfig.suptitle('Outlier Detection - Box Plots', fontsize=16, y=1.02)\n\ncolors = ['#667eea', '#764ba2', '#f093fb', '#4facfe', '#43e97b']\n\nfor idx, (col, color) in enumerate(zip(numerical_cols, colors)):\n    ax = axes[idx]\n    \n    bp = ax.boxplot(df[col].dropna(), vert=True, patch_artist=True,\n                    boxprops=dict(facecolor=color, alpha=0.7),\n                    medianprops=dict(color='red', linewidth=2))\n    \n    ax.set_title(col.replace('_', ' ').title(), fontsize=11, fontweight='bold')\n    ax.set_ylabel('Value')\n    ax.grid(axis='y', alpha=0.3)\n    \n    # Add outlier count\n    Q1, Q3 = df[col].quantile([0.25, 0.75])\n    IQR = Q3 - Q1\n    outliers = df[(df[col] < Q1 - 1.5*IQR) | (df[col] > Q3 + 1.5*IQR)]\n    \n    ax.text(0.5, 0.98, f'Outliers: {len(outliers)} ({len(outliers)/len(df)*100:.1f}%)',\n           transform=ax.transAxes, ha='center', va='top', fontsize=8,\n           bbox=dict(boxstyle='round', facecolor='yellow', alpha=0.7))\n\nplt.tight_layout()\nplt.show()",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Numerical features\nnumerical_cols = ['age', 'education_num', 'capital_gain', 'hours_per_week']\n\n# Box plots\nfig, axes = plt.subplots(2, 2, figsize=(12, 10))\nfig.suptitle('Outlier Detection Using Box Plots', fontsize=16)\n\nfor idx, col in enumerate(numerical_cols):\n    ax = axes[idx // 2, idx % 2]\n    \n    sns.boxplot(y=df[col], color='#667eea', ax=ax)\n    ax.set_title(col.replace('_', ' ').title(), fontsize=12, fontweight='bold')\n    ax.grid(axis='y', alpha=0.3)\n    \n    # Calculate outliers\n    Q1, Q3 = df[col].quantile([0.25, 0.75])\n    IQR = Q3 - Q1\n    outliers = len(df[(df[col] < Q1 - 1.5*IQR) | (df[col] > Q3 + 1.5*IQR)])\n    \n    ax.text(0.02, 0.98, f'Outliers: {outliers}',\n           transform=ax.transAxes, va='top',\n           bbox=dict(boxstyle='round', facecolor='wheat', alpha=0.7))\n\nplt.tight_layout()\nplt.show()\n\n# Violin plot (shows distribution + outliers)\nfig, ax = plt.subplots(figsize=(12, 6))\nsns.violinplot(data=df[numerical_cols], palette='muted', ax=ax)\nax.set_title('Feature Distributions with Outliers (Violin Plot)', fontsize=14, fontweight='bold')\nax.set_ylabel('Value')\nplt.xticks(rotation=45)\nplt.tight_layout()\nplt.show()"
  },
  "target_vs_features": {
    "title": "Target vs Features Analysis",
    "explanation": {
      "what": "Analyze how target variable relates to each feature. Shows which features strongly correlate with the target.",
      "why": "Features with strong target relationship are good predictors. Weak relationship features may not add value to models.",
      "how": "For categorical: compare target distribution across categories. For numerical: compare mean/median by target class. Large differences = strong predictor."
    },
    "plotly": "import pandas as pd\nimport plotly.graph_objects as go\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Analyze income by categorical feature\nfeature = 'education'  # Change to: sex, marital_status, occupation, etc.\n\n# Cross-tabulation (percentage)\ncrosstab = pd.crosstab(df[feature], df['income'], normalize='index') * 100\n\n# Sort by >50K percentage\ncrosstab = crosstab.sort_values('>50K', ascending=False)\n\n# Create grouped bar chart\nfig = go.Figure()\n\nfig.add_trace(go.Bar(\n    name='<=50K',\n    x=crosstab.index,\n    y=crosstab['<=50K'],\n    marker_color='#667eea'\n))\n\nfig.add_trace(go.Bar(\n    name='>50K',\n    x=crosstab.index,\n    y=crosstab['>50K'],\n    marker_color='#f093fb'\n))\n\nfig.update_layout(\n    title=f'Income Distribution by {feature.replace(\"_\", \" \").title()}',\n    xaxis_title=feature.replace('_', ' ').title(),\n    yaxis_title='Percentage (%)',\n    barmode='stack',\n    width=1000,\n    height=500,\n    xaxis={'tickangle': 45}\n)\n\nfig.show()\n\n# Print insights\nprint(f\"\\n{feature} with highest >50K rate:\")\nprint(crosstab.nlargest(5, '>50K'))",
    "matplotlib": "import pandas as pd\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Analyze top categorical features\nfeatures = ['sex', 'education', 'marital_status']\n\nfig, axes = plt.subplots(1, 3, figsize=(15, 5))\nfig.suptitle('Income Distribution by Categorical Features', fontsize=16)\n\nfor idx, feature in enumerate(features):\n    ax = axes[idx]\n    \n    # Cross-tabulation (counts)\n    crosstab = pd.crosstab(df[feature], df['income'])\n    \n    # Stacked bar chart\n    crosstab.plot(kind='bar', stacked=True, color=['#667eea', '#f093fb'],\n                 alpha=0.8, ax=ax)\n    \n    ax.set_title(feature.replace('_', ' ').title(), fontsize=12, fontweight='bold')\n    ax.set_xlabel('')\n    ax.set_ylabel('Count')\n    ax.legend(title='Income', fontsize=9)\n    ax.grid(axis='y', alpha=0.3)\n    plt.setp(ax.xaxis.get_majorticklabels(), rotation=45, ha='right')\n\nplt.tight_layout()\nplt.show()",
    "seaborn": "import pandas as pd\nimport seaborn as sns\nimport matplotlib.pyplot as plt\n\n# Load data\nurl = 'https://raw.githubusercontent.com/LTSACH/AILearningHub/main/datasets/adult-income/data/adult_train.csv'\ndf = pd.read_csv(url)\n\n# Select feature\nfeature = 'marital_status'  # Change to other features\n\n# Count plot grouped by income\nfig, ax = plt.subplots(figsize=(12, 6))\n\nsns.countplot(data=df, x=feature, hue='income',\n             palette={'<=50K': '#667eea', '>50K': '#f093fb'},\n             ax=ax)\n\nax.set_title(f'Income Distribution by {feature.replace(\"_\", \" \").title()}',\n            fontsize=14, fontweight='bold')\nax.set_xlabel(feature.replace('_', ' ').title(), fontsize=12)\nax.set_ylabel('Count', fontsize=12)\nax.legend(title='Income', fontsize=10)\nax.grid(axis='y', alpha=0.3)\n\nplt.xticks(rotation=45, ha='right')\nplt.tight_layout()\nplt.show()\n\n# Percentage breakdown\ncrosstab = pd.crosstab(df[feature], df['income'], normalize='index') * 100\nprint(f\"\\n{feature} - Income Distribution (%):\")\nprint(crosstab.round(2))"
  }
}
    </script>
    
    <script>
        const CODE_JSON_PATH = 'eda_code_examples_tabular.json';
    </script>


    <script>
        // ===== Code Examples Management =====
        let codeExamples = {};
        let codeLoaded = false;
        
        // Load code examples
        async function loadCodeExamples() {
            try {
                const embeddedScript = document.getElementById('embedded-code-examples');
                if (embeddedScript && embeddedScript.textContent.trim()) {
                    const embeddedData = JSON.parse(embeddedScript.textContent);
                    if (Object.keys(embeddedData).length > 0) {
                        codeExamples = embeddedData;
                        codeLoaded = true;
                        console.log('✓ Code examples loaded from embedded data');
                        return;
                    }
                }
            } catch (error) {
                console.warn('Could not load embedded code examples:', error);
            }
            
            try {
                const response = await fetch(CODE_JSON_PATH);
                if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
                codeExamples = await response.json();
                codeLoaded = true;
                console.log('✓ Code examples loaded from external JSON');
            } catch (error) {
                console.error('Failed to load code examples:', error);
                codeLoaded = false;
            }
        }
        
        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            loadCodeExamples();
            
            // Collapse/Expand buttons
            document.getElementById('collapseAllBtn').addEventListener('click', collapseAll);
            document.getElementById('expandAllBtn').addEventListener('click', expandAll);
            
            // Theme toggle
            document.getElementById('themeToggleBtn').addEventListener('click', toggleCodeTheme);
            
            // Load saved theme
            loadThemePreference();
            
            // Highlight code
            if (typeof Prism !== 'undefined') {
                Prism.highlightAll();
            }
        });
        
        // ===== Tutorial Functions =====
        function toggleTutorial(sectionId) {
            const tutorial = document.getElementById(`${sectionId}-tutorial`);
            if (!tutorial) return;
            
            const isActive = tutorial.classList.contains('active');
            
            if (!isActive && codeLoaded) {
                loadTutorialContent(sectionId);
            }
            
            tutorial.classList.toggle('active');
        }
        
        function loadTutorialContent(sectionId) {
            const example = codeExamples[sectionId];
            if (!example) {
                console.warn(`No code example found for: ${sectionId}`);
                return;
            }
            
            // Hide loading
            const loading = document.getElementById(`${sectionId}-loading`);
            if (loading) loading.style.display = 'none';
            
            // Show explanation
            const explanationDiv = document.getElementById(`${sectionId}-explanation`);
            if (explanationDiv && example.explanation) {
                explanationDiv.innerHTML = `
                    <h3>📖 ${example.title || 'Tutorial'}</h3>
                    ${example.explanation.what ? `<p><strong>What:</strong> ${example.explanation.what}</p>` : ''}
                    ${example.explanation.why ? `<p><strong>Why:</strong> ${example.explanation.why}</p>` : ''}
                    ${example.explanation.how ? `<p><strong>How:</strong> ${example.explanation.how}</p>` : ''}
                `;
                explanationDiv.style.display = 'block';
            }
            
            // Show code tabs
            const codeTabs = document.getElementById(`${sectionId}-code-tabs`);
            if (codeTabs) codeTabs.style.display = 'block';
            
            // Load code for each library
            ['plotly', 'matplotlib', 'seaborn'].forEach(lib => {
                const codeElement = document.getElementById(`${sectionId}-${lib}-code`);
                if (codeElement && example[lib]) {
                    codeElement.textContent = example[lib];
                    if (typeof Prism !== 'undefined') {
                        Prism.highlightElement(codeElement);
                    }
                }
            });
        }
        
        function switchTab(sectionId, library) {
            ['plotly', 'matplotlib', 'seaborn'].forEach(lib => {
                const tab = document.getElementById(`${sectionId}-${lib}`);
                if (tab) tab.classList.remove('active');
            });
            
            const selectedTab = document.getElementById(`${sectionId}-${library}`);
            if (selectedTab) selectedTab.classList.add('active');
            
            const buttons = document.querySelectorAll(`#${sectionId}-code-tabs .code-tab-button`);
            buttons.forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent.toLowerCase().includes(library)) {
                    btn.classList.add('active');
                }
            });
        }
        
        function copyCodeQuick(sectionId) {
            const example = codeExamples[sectionId];
            if (!example || !example.plotly) {
                alert('Code example not loaded yet. Please open the tutorial first.');
                return;
            }
            
            copyToClipboard(example.plotly);
            showCopyFeedback(event.target);
        }
        
        function copyCodeBlock(sectionId, library) {
            const example = codeExamples[sectionId];
            if (!example || !example[library]) {
                console.error(`No code found for ${sectionId} - ${library}`);
                return;
            }
            
            copyToClipboard(example[library]);
            showCopyFeedback(event.target);
        }
        
        function copyToClipboard(text) {
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text);
            } else {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.left = '-999999px';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                } catch (err) {
                    console.error('Failed to copy:', err);
                }
                document.body.removeChild(textArea);
            }
        }
        
        function showCopyFeedback(button) {
            const originalText = button.innerHTML;
            button.innerHTML = '✅ Copied!';
            button.classList.add('copied');
            
            setTimeout(() => {
                button.innerHTML = originalText;
                button.classList.remove('copied');
            }, 2000);
        }
        
        // ===== Section Toggle =====
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (!section) return;
            
            const header = section.querySelector('h2');
            const content = section.querySelector('.section-content');
            
            if (header && content) {
                // Check both class and display style for accurate state
                const isCollapsed = header.classList.contains('collapsed') || 
                                  content.style.display === 'none';
                
                if (isCollapsed) {
                    // Expand
                    header.classList.remove('collapsed');
                    content.style.display = 'block';
                    content.classList.remove('collapsed');
                } else {
                    // Collapse
                    header.classList.add('collapsed');
                    content.style.display = 'none';
                    content.classList.add('collapsed');
                }
            }
        }
        
        function collapseAll() {
            document.querySelectorAll('.section').forEach(section => {
                const header = section.querySelector('h2');
                const content = section.querySelector('.section-content');
                
                if (header && content) {
                    header.classList.add('collapsed');
                    content.style.display = 'none';
                    content.classList.add('collapsed');
                }
            });
        }
        
        function expandAll() {
            document.querySelectorAll('.section').forEach(section => {
                const header = section.querySelector('h2');
                const content = section.querySelector('.section-content');
                
                if (header && content) {
                    header.classList.remove('collapsed');
                    content.style.display = 'block';
                    content.classList.remove('collapsed');
                }
            });
        }
        
        // ===== Theme Toggle =====
        function toggleCodeTheme() {
            const themeLink = document.getElementById('prism-theme');
            const themeBtn = document.getElementById('themeToggleBtn');
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            const currentTheme = themeLink.href;
            
            if (currentTheme.includes('prism-coy')) {
                themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css';
                themeBtn.classList.add('dark-mode');
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark Code';
                document.body.classList.add('dark-theme');
                localStorage.setItem('codeTheme', 'dark');
            } else {
                themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-coy.min.css';
                themeBtn.classList.remove('dark-mode');
                themeIcon.textContent = '☀️';
                themeText.textContent = 'Light Code';
                document.body.classList.remove('dark-theme');
                localStorage.setItem('codeTheme', 'light');
            }
            
            if (typeof Prism !== 'undefined') {
                setTimeout(() => Prism.highlightAll(), 100);
            }
        }
        
        function loadThemePreference() {
            const savedTheme = localStorage.getItem('codeTheme');
            const themeLink = document.getElementById('prism-theme');
            const themeBtn = document.getElementById('themeToggleBtn');
            const themeIcon = document.getElementById('themeIcon');
            const themeText = document.getElementById('themeText');
            
            if (savedTheme === 'dark') {
                themeLink.href = 'https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css';
                themeBtn.classList.add('dark-mode');
                themeIcon.textContent = '🌙';
                themeText.textContent = 'Dark Code';
                document.body.classList.add('dark-theme');
            }
        }
    </script>

<script>
// ===== Chart Generation =====

document.addEventListener('DOMContentLoaded', function() {

    // Wait for DOM to be fully loaded before creating charts

    


        // Target Distribution Chart
        const targetCtx = document.getElementById('targetChart');
        if (targetCtx) {
            new Chart(targetCtx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ["<=50K", ">50K"],
                    datasets: [{
                        data: [24720, 7841],
                        backgroundColor: ['#667eea', '#f093fb'],
                        borderWidth: 2,
                        borderColor: '#fff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: { font: { size: 14 } }
                        },
                        title: {
                            display: true,
                            text: 'Income Distribution',
                            font: { size: 18 }
                        }
                    }
                }
            });
        }



        // Missing Values Chart
        const missingCtx = document.getElementById('missingChart');
        if (missingCtx) {
            new Chart(missingCtx.getContext('2d'), {
                type: 'bar',
                data: {
                    labels: ["occupation", "workclass", "native_country"],
                    datasets: [{
                        label: 'Missing %',
                        data: [5.660145572924664, 5.638647461687294, 1.7904855501980899],
                        backgroundColor: 'rgba(240, 147, 251, 0.7)',
                        borderColor: 'rgba(240, 147, 251, 1)',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false },
                        title: {
                            display: true,
                            text: 'Missing Values by Feature (%)',
                            font: { size: 16 }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Missing Percentage (%)' }
                        },
                        x: {
                            title: { display: true, text: 'Features' }
                        }
                    }
                }
            });
        }



        // Numerical Distribution Charts
        const numContainer = document.getElementById('numericalChartsContainer');
        if (numContainer) {

            // age Distribution
            const chartDiv0 = document.createElement('div');
            chartDiv0.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Age Distribution</h3>
                <div style="height: 300px; margin-bottom: 20px;">
                    <canvas id="numChart0"></canvas>
                </div>
            `;
            numContainer.appendChild(chartDiv0);
            
            const ctx0 = document.getElementById('numChart0').getContext('2d');
            new Chart(ctx0, {
                type: 'bar',
                data: {
                    labels: ["17-19", "19-22", "22-24", "24-27", "27-29", "29-32", "32-34", "34-36", "36-39", "39-41", "41-44", "44-46", "46-49", "49-51", "51-54", "54-56", "56-58", "58-61", "61-63", "63-66", "66-68", "68-71", "71-73", "73-75", "75-78", "78-80", "80-83", "83-85", "85-88", "88-90"],
                    datasets: [{
                        label: 'Frequency',
                        data: [1657, 1473, 2440, 1626, 2515, 1749, 2589, 1774, 1685, 2418, 1550, 2195, 1251, 1774, 942, 834, 1090, 667, 788, 386, 421, 197, 139, 160, 75, 67, 32, 19, 2, 46],
                        backgroundColor: '#667eea80',
                        borderColor: '#667eea',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        x: {
                            title: { display: true, text: 'Age' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        }
                    }
                }
            });


            // fnlwgt Distribution
            const chartDiv1 = document.createElement('div');
            chartDiv1.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Fnlwgt Distribution</h3>
                <div style="height: 300px; margin-bottom: 20px;">
                    <canvas id="numChart1"></canvas>
                </div>
            `;
            numContainer.appendChild(chartDiv1);
            
            const ctx1 = document.getElementById('numChart1').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ["12285-61366", "61366-110446", "110446-159527", "159527-208608", "208608-257688", "257688-306769", "306769-355850", "355850-404930", "404930-454011", "454011-503092", "503092-552172", "552172-601253", "601253-650334", "650334-699414", "699414-748495", "748495-797576", "797576-846656", "846656-895737", "895737-944818", "944818-993898", "993898-1042979", "1042979-1092060", "1092060-1141140", "1141140-1190221", "1190221-1239302", "1239302-1288382", "1288382-1337463", "1337463-1386544", "1386544-1435624", "1435624-1484705"],
                    datasets: [{
                        label: 'Frequency',
                        data: [3033, 3998, 6086, 8355, 4436, 2536, 1875, 1071, 552, 258, 139, 80, 42, 36, 24, 10, 5, 5, 4, 3, 3, 1, 2, 2, 1, 1, 0, 1, 0, 2],
                        backgroundColor: '#764ba280',
                        borderColor: '#764ba2',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        x: {
                            title: { display: true, text: 'Fnlwgt' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        }
                    }
                }
            });


            // education_num Distribution
            const chartDiv2 = document.createElement('div');
            chartDiv2.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Education Num Distribution</h3>
                <div style="height: 300px; margin-bottom: 20px;">
                    <canvas id="numChart2"></canvas>
                </div>
            `;
            numContainer.appendChild(chartDiv2);
            
            const ctx2 = document.getElementById('numChart2').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ["1-2", "2-2", "2-2", "2-3", "3-4", "4-4", "4-4", "4-5", "5-6", "6-6", "6-6", "6-7", "7-8", "8-8", "8-8", "8-9", "9-10", "10-10", "10-10", "10-11", "11-12", "12-12", "12-12", "12-13", "13-14", "14-14", "14-14", "14-15", "15-16", "16-16"],
                    datasets: [{
                        label: 'Frequency',
                        data: [51, 0, 168, 0, 333, 0, 646, 0, 514, 0, 933, 0, 1175, 0, 433, 0, 10501, 0, 7291, 0, 1382, 0, 1067, 0, 5355, 0, 1723, 0, 576, 413],
                        backgroundColor: '#f093fb80',
                        borderColor: '#f093fb',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        x: {
                            title: { display: true, text: 'Education Num' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        }
                    }
                }
            });


            // capital_gain Distribution
            const chartDiv3 = document.createElement('div');
            chartDiv3.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Capital Gain Distribution</h3>
                <div style="height: 300px; margin-bottom: 20px;">
                    <canvas id="numChart3"></canvas>
                </div>
            `;
            numContainer.appendChild(chartDiv3);
            
            const ctx3 = document.getElementById('numChart3').getContext('2d');
            new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: ["0-3333", "3333-6667", "6667-10000", "10000-13333", "13333-16666", "16666-20000", "20000-23333", "23333-26666", "26666-30000", "30000-33333", "33333-36666", "36666-40000", "40000-43333", "43333-46666", "46666-50000", "50000-53333", "53333-56666", "56666-59999", "59999-63333", "63333-66666", "66666-69999", "69999-73333", "73333-76666", "76666-79999", "79999-83332", "83332-86666", "86666-89999", "89999-93332", "93332-96666", "96666-99999"],
                    datasets: [{
                        label: 'Frequency',
                        data: [30514, 614, 663, 63, 452, 2, 38, 15, 34, 0, 5, 0, 2, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 159],
                        backgroundColor: '#4facfe80',
                        borderColor: '#4facfe',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        x: {
                            title: { display: true, text: 'Capital Gain' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        }
                    }
                }
            });


            // capital_loss Distribution
            const chartDiv4 = document.createElement('div');
            chartDiv4.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Capital Loss Distribution</h3>
                <div style="height: 300px; margin-bottom: 20px;">
                    <canvas id="numChart4"></canvas>
                </div>
            `;
            numContainer.appendChild(chartDiv4);
            
            const ctx4 = document.getElementById('numChart4').getContext('2d');
            new Chart(ctx4, {
                type: 'bar',
                data: {
                    labels: ["0-145", "145-290", "290-436", "436-581", "581-726", "726-871", "871-1016", "1016-1162", "1162-1307", "1307-1452", "1452-1597", "1597-1742", "1742-1888", "1888-2033", "2033-2178", "2178-2323", "2323-2468", "2468-2614", "2614-2759", "2759-2904", "2904-3049", "3049-3194", "3194-3340", "3340-3485", "3485-3630", "3630-3775", "3775-3920", "3920-4066", "4066-4211", "4211-4356"],
                    datasets: [{
                        label: 'Frequency',
                        data: [31042, 5, 6, 0, 15, 2, 8, 9, 4, 36, 169, 256, 272, 457, 50, 71, 113, 23, 2, 10, 2, 0, 0, 0, 0, 4, 2, 0, 0, 3],
                        backgroundColor: '#43e97b80',
                        borderColor: '#43e97b',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        x: {
                            title: { display: true, text: 'Capital Loss' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        }
                    }
                }
            });


            // hours_per_week Distribution
            const chartDiv5 = document.createElement('div');
            chartDiv5.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Hours Per Week Distribution</h3>
                <div style="height: 300px; margin-bottom: 20px;">
                    <canvas id="numChart5"></canvas>
                </div>
            `;
            numContainer.appendChild(chartDiv5);
            
            const ctx5 = document.getElementById('numChart5').getContext('2d');
            new Chart(ctx5, {
                type: 'bar',
                data: {
                    labels: ["1-4", "4-8", "8-11", "11-14", "14-17", "17-21", "21-24", "24-27", "27-30", "30-34", "34-37", "37-40", "40-43", "43-47", "47-50", "50-53", "53-57", "57-60", "60-63", "63-66", "66-70", "70-73", "73-76", "76-79", "79-83", "83-86", "86-89", "89-92", "92-96", "96-99"],
                    datasets: [{
                        label: 'Frequency',
                        data: [145, 150, 441, 241, 638, 1313, 89, 986, 1242, 310, 1545, 15880, 406, 2118, 595, 2995, 832, 50, 1505, 275, 16, 362, 72, 14, 137, 58, 7, 33, 3, 103],
                        backgroundColor: '#fa709a80',
                        borderColor: '#fa709a',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        x: {
                            title: { display: true, text: 'Hours Per Week' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        }
                    }
                }
            });

        }


        // Categorical Distribution Charts
        console.log('🔍 Looking for categoricalChartsContainer...');
        const catContainer = document.getElementById('categoricalChartsContainer');
        console.log('catContainer found:', catContainer);
        if (catContainer) {
            console.log('✅ Creating categorical charts...');

            // workclass Distribution
            const chartDiv0 = document.createElement('div');
            chartDiv0.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Workclass Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 8 (showing top 8)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart0"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv0);
            
            const ctx0 = document.getElementById('catChart0').getContext('2d');
            new Chart(ctx0, {
                type: 'bar',
                data: {
                    labels: ["Private", "Self-emp-not-inc", "Local-gov", "State-gov", "Self-emp-inc", "Federal-gov", "Without-pay", "Never-worked"],
                    datasets: [{
                        label: 'Count',
                        data: [22696, 2541, 2093, 1298, 1116, 960, 14, 7],
                        backgroundColor: '#667eea80',
                        borderColor: '#667eea',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Workclass' }
                        }
                    }
                }
            });


            // education Distribution
            const chartDiv1 = document.createElement('div');
            chartDiv1.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Education Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 16 (showing top 15)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart1"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv1);
            
            const ctx1 = document.getElementById('catChart1').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ["HS-grad", "Some-college", "Bachelors", "Masters", "Assoc-voc", "11th", "Assoc-acdm", "10th", "7th-8th", "Prof-school", "9th", "12th", "Doctorate", "5th-6th", "1st-4th"],
                    datasets: [{
                        label: 'Count',
                        data: [10501, 7291, 5355, 1723, 1382, 1175, 1067, 933, 646, 576, 514, 433, 413, 333, 168],
                        backgroundColor: '#764ba280',
                        borderColor: '#764ba2',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Education' }
                        }
                    }
                }
            });


            // marital_status Distribution
            const chartDiv2 = document.createElement('div');
            chartDiv2.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Marital Status Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 7 (showing top 7)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart2"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv2);
            
            const ctx2 = document.getElementById('catChart2').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ["Married-civ-spouse", "Never-married", "Divorced", "Separated", "Widowed", "Married-spouse-absent", "Married-AF-spouse"],
                    datasets: [{
                        label: 'Count',
                        data: [14976, 10683, 4443, 1025, 993, 418, 23],
                        backgroundColor: '#f093fb80',
                        borderColor: '#f093fb',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Marital Status' }
                        }
                    }
                }
            });


            // occupation Distribution
            const chartDiv3 = document.createElement('div');
            chartDiv3.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Occupation Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 14 (showing top 14)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart3"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv3);
            
            const ctx3 = document.getElementById('catChart3').getContext('2d');
            new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: ["Prof-specialty", "Craft-repair", "Exec-managerial", "Adm-clerical", "Sales", "Other-service", "Machine-op-inspct", "Transport-moving", "Handlers-cleaners", "Farming-fishing", "Tech-support", "Protective-serv", "Priv-house-serv", "Armed-Forces"],
                    datasets: [{
                        label: 'Count',
                        data: [4140, 4099, 4066, 3770, 3650, 3295, 2002, 1597, 1370, 994, 928, 649, 149, 9],
                        backgroundColor: '#4facfe80',
                        borderColor: '#4facfe',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Occupation' }
                        }
                    }
                }
            });


            // relationship Distribution
            const chartDiv4 = document.createElement('div');
            chartDiv4.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Relationship Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 6 (showing top 6)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart4"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv4);
            
            const ctx4 = document.getElementById('catChart4').getContext('2d');
            new Chart(ctx4, {
                type: 'bar',
                data: {
                    labels: ["Husband", "Not-in-family", "Own-child", "Unmarried", "Wife", "Other-relative"],
                    datasets: [{
                        label: 'Count',
                        data: [13193, 8305, 5068, 3446, 1568, 981],
                        backgroundColor: '#43e97b80',
                        borderColor: '#43e97b',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Relationship' }
                        }
                    }
                }
            });


            // race Distribution
            const chartDiv5 = document.createElement('div');
            chartDiv5.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Race Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 5 (showing top 5)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart5"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv5);
            
            const ctx5 = document.getElementById('catChart5').getContext('2d');
            new Chart(ctx5, {
                type: 'bar',
                data: {
                    labels: ["White", "Black", "Asian-Pac-Islander", "Amer-Indian-Eskimo", "Other"],
                    datasets: [{
                        label: 'Count',
                        data: [27816, 3124, 1039, 311, 271],
                        backgroundColor: '#fa709a80',
                        borderColor: '#fa709a',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Race' }
                        }
                    }
                }
            });


            // sex Distribution
            const chartDiv6 = document.createElement('div');
            chartDiv6.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Sex Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 2 (showing top 2)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart6"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv6);
            
            const ctx6 = document.getElementById('catChart6').getContext('2d');
            new Chart(ctx6, {
                type: 'bar',
                data: {
                    labels: ["Male", "Female"],
                    datasets: [{
                        label: 'Count',
                        data: [21790, 10771],
                        backgroundColor: '#fee14080',
                        borderColor: '#fee140',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Sex' }
                        }
                    }
                }
            });


            // native_country Distribution
            const chartDiv7 = document.createElement('div');
            chartDiv7.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Native Country Distribution</h3>
                <p style="color: #666; font-size: 0.9em;">Unique values: 41 (showing top 15)</p>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="catChart7"></canvas>
                </div>
            `;
            catContainer.appendChild(chartDiv7);
            
            const ctx7 = document.getElementById('catChart7').getContext('2d');
            new Chart(ctx7, {
                type: 'bar',
                data: {
                    labels: ["United-States", "Mexico", "Philippines", "Germany", "Canada", "Puerto-Rico", "El-Salvador", "India", "Cuba", "England", "Jamaica", "South", "China", "Italy", "Dominican-Republic"],
                    datasets: [{
                        label: 'Count',
                        data: [29170, 643, 198, 137, 121, 114, 106, 100, 95, 90, 81, 80, 75, 73, 70],
                        backgroundColor: '#30cfd080',
                        borderColor: '#30cfd0',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: { display: true, text: 'Count' }
                        },
                        y: {
                            title: { display: true, text: 'Native Country' }
                        }
                    }
                }
            });

            console.log('✅ All categorical charts created');
        } else {
            console.error('❌ categoricalChartsContainer not found!');
        }


        // Correlation Heatmap
        console.log('🔍 Looking for correlationHeatmap...');
        const corrDiv = document.getElementById('correlationHeatmap');
        console.log('corrDiv found:', corrDiv);
        if (corrDiv) {
            console.log('✅ Creating correlation heatmap...');

            var annotations = [];
var features = ["age", "fnlwgt", "education_num", "capital_gain", "capital_loss", "hours_per_week"];
var matrix = [[1.0, -0.07664586787504064, 0.036527189464106324, 0.0776744981659941, 0.057774539478974145, 0.06875570750955742], [-0.07664586787504064, 1.0, -0.04319463273302273, 0.00043188579188680327, -0.010251711675330953, -0.01876849061074513], [0.036527189464106324, -0.04319463273302273, 1.0, 0.12263011469222229, 0.07992295668664588, 0.1481227326229115], [0.0776744981659941, 0.00043188579188680327, 0.12263011469222229, 1.0, -0.03161506295222775, 0.07840861539013491], [0.057774539478974145, -0.010251711675330953, 0.07992295668664588, -0.03161506295222775, 1.0, 0.05425636227265108], [0.06875570750955742, -0.01876849061074513, 0.1481227326229115, 0.07840861539013491, 0.05425636227265108, 1.0]];

        for (var i = 0; i < matrix.length; i++) {
            for (var j = 0; j < matrix[i].length; j++) {
                annotations.push({
                    x: j,
                    y: i,
                    text: matrix[i][j].toFixed(2),
                    showarrow: false,
                    font: {
                        color: Math.abs(matrix[i][j]) > 0.5 ? 'white' : 'black',
                        size: 11,
                        weight: 'bold'
                    }
                });
            }
        }

            
            var heatmapData = [{
                z: matrix,
                x: features,
                y: features,
                type: 'heatmap',
                colorscale: 'RdBu_r',
                zmid: 0,
                showscale: true,
                colorbar: {
                    title: 'Correlation',
                    titleside: 'right'
                }
            }];
            
            var layout = {
                title: {
                    text: 'Feature Correlation Matrix',
                    x: 0.5,
                    font: {size: 18}
                },
                xaxis: {
                    title: 'Features',
                    tickangle: 45
                },
                yaxis: {
                    title: 'Features',
                    autorange: 'reversed'
                },
                annotations: annotations,
                width: null,
                height: 600,
                margin: {l: 100, r: 100, t: 80, b: 120}
            };
            
            var config = {
                responsive: true,
                displayModeBar: true,
                displaylogo: false
            };
            
            Plotly.newPlot('correlationHeatmap', heatmapData, layout, config);
            console.log('✅ Correlation heatmap created');
        } else {
            console.error('❌ correlationHeatmap div not found!');
        }



        // Target vs Features Charts
        const targetVsContainer = document.getElementById('targetVsFeaturesContainer');
        if (targetVsContainer) {

            // workclass vs Target
            const chartDiv0 = document.createElement('div');
            chartDiv0.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Income by Workclass</h3>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="targetVsChart0"></canvas>
                </div>
            `;
            targetVsContainer.appendChild(chartDiv0);
            
            const ctx0 = document.getElementById('targetVsChart0').getContext('2d');
            new Chart(ctx0, {
                type: 'bar',
                data: {
                    labels: ["Federal-gov", "Local-gov", "Never-worked", "Private", "Self-emp-inc", "Self-emp-not-inc", "State-gov", "Without-pay"],
                    datasets: [
                        {
                            label: '<=50K',
                            data: [61.354166666666664, 70.52078356426182, 100.0, 78.13271060979908, 44.2652329749104, 71.5072805981897, 72.80431432973806, 100.0],
                            backgroundColor: '#667eea',
                            borderWidth: 1
                        },
                        {
                            label: '>50K',
                            data: [38.645833333333336, 29.479216435738177, 0.0, 21.867289390200916, 55.7347670250896, 28.492719401810312, 27.195685670261945, 0.0],
                            backgroundColor: '#f093fb',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            title: { display: true, text: 'Workclass' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Percentage (%)' }
                        }
                    }
                }
            });


            // education vs Target
            const chartDiv1 = document.createElement('div');
            chartDiv1.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Income by Education</h3>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="targetVsChart1"></canvas>
                </div>
            `;
            targetVsContainer.appendChild(chartDiv1);
            
            const ctx1 = document.getElementById('targetVsChart1').getContext('2d');
            new Chart(ctx1, {
                type: 'bar',
                data: {
                    labels: ["10th", "11th", "12th", "1st-4th", "5th-6th", "7th-8th", "9th", "Assoc-acdm", "Assoc-voc", "Bachelors", "Doctorate", "HS-grad", "Masters", "Preschool", "Prof-school", "Some-college"],
                    datasets: [
                        {
                            label: '<=50K',
                            data: [93.35476956055734, 94.8936170212766, 92.37875288683603, 96.42857142857143, 95.1951951951952, 93.80804953560371, 94.74708171206225, 75.16401124648547, 73.87843704775688, 58.52474323062559, 25.907990314769975, 84.04913817731645, 44.34126523505514, 100.0, 26.5625, 80.97654642710191],
                            backgroundColor: '#667eea',
                            borderWidth: 1
                        },
                        {
                            label: '>50K',
                            data: [6.645230439442658, 5.106382978723404, 7.621247113163972, 3.571428571428571, 4.804804804804805, 6.191950464396285, 5.252918287937743, 24.835988753514528, 26.121562952243128, 41.47525676937442, 74.09200968523002, 15.950861822683555, 55.65873476494486, 0.0, 73.4375, 19.023453572898095],
                            backgroundColor: '#f093fb',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            title: { display: true, text: 'Education' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Percentage (%)' }
                        }
                    }
                }
            });


            // marital_status vs Target
            const chartDiv2 = document.createElement('div');
            chartDiv2.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Income by Marital Status</h3>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="targetVsChart2"></canvas>
                </div>
            `;
            targetVsContainer.appendChild(chartDiv2);
            
            const ctx2 = document.getElementById('targetVsChart2').getContext('2d');
            new Chart(ctx2, {
                type: 'bar',
                data: {
                    labels: ["Divorced", "Married-AF-spouse", "Married-civ-spouse", "Married-spouse-absent", "Never-married", "Separated", "Widowed"],
                    datasets: [
                        {
                            label: '<=50K',
                            data: [89.57911321179384, 56.52173913043478, 55.315170940170944, 91.86602870813397, 95.40391275858842, 93.5609756097561, 91.44008056394763],
                            backgroundColor: '#667eea',
                            borderWidth: 1
                        },
                        {
                            label: '>50K',
                            data: [10.420886788206166, 43.47826086956522, 44.68482905982906, 8.133971291866029, 4.596087241411588, 6.439024390243903, 8.559919436052366],
                            backgroundColor: '#f093fb',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            title: { display: true, text: 'Marital Status' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Percentage (%)' }
                        }
                    }
                }
            });


            // occupation vs Target
            const chartDiv3 = document.createElement('div');
            chartDiv3.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Income by Occupation</h3>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="targetVsChart3"></canvas>
                </div>
            `;
            targetVsContainer.appendChild(chartDiv3);
            
            const ctx3 = document.getElementById('targetVsChart3').getContext('2d');
            new Chart(ctx3, {
                type: 'bar',
                data: {
                    labels: ["Adm-clerical", "Armed-Forces", "Craft-repair", "Exec-managerial", "Farming-fishing", "Handlers-cleaners", "Machine-op-inspct", "Other-service", "Priv-house-serv", "Prof-specialty", "Protective-serv", "Sales", "Tech-support", "Transport-moving"],
                    datasets: [
                        {
                            label: '<=50K',
                            data: [86.55172413793103, 88.88888888888889, 77.33593559404733, 51.59862272503689, 88.43058350100603, 93.72262773722628, 87.51248751248751, 95.8421851289833, 99.32885906040269, 55.09661835748793, 67.4884437596302, 73.06849315068493, 69.50431034482759, 79.9624295554164],
                            backgroundColor: '#667eea',
                            borderWidth: 1
                        },
                        {
                            label: '>50K',
                            data: [13.448275862068964, 11.11111111111111, 22.664064405952672, 48.40137727496311, 11.569416498993963, 6.2773722627737225, 12.487512487512488, 4.157814871016692, 0.6711409395973155, 44.90338164251207, 32.5115562403698, 26.931506849315067, 30.495689655172413, 20.037570444583594],
                            backgroundColor: '#f093fb',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            title: { display: true, text: 'Occupation' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Percentage (%)' }
                        }
                    }
                }
            });


            // relationship vs Target
            const chartDiv4 = document.createElement('div');
            chartDiv4.innerHTML = `
                <h3 style="color: #667eea; margin-top: 30px;">Income by Relationship</h3>
                <div style="height: 400px; margin-bottom: 20px;">
                    <canvas id="targetVsChart4"></canvas>
                </div>
            `;
            targetVsContainer.appendChild(chartDiv4);
            
            const ctx4 = document.getElementById('targetVsChart4').getContext('2d');
            new Chart(ctx4, {
                type: 'bar',
                data: {
                    labels: ["Husband", "Not-in-family", "Other-relative", "Own-child", "Unmarried", "Wife"],
                    datasets: [
                        {
                            label: '<=50K',
                            data: [55.1428787993633, 89.69295605057195, 96.2283384301733, 98.67797947908446, 93.67382472431804, 52.48724489795919],
                            backgroundColor: '#667eea',
                            borderWidth: 1
                        },
                        {
                            label: '>50K',
                            data: [44.857121200636705, 10.307043949428056, 3.771661569826707, 1.3220205209155484, 6.32617527568195, 47.51275510204081],
                            backgroundColor: '#f093fb',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        }
                    },
                    scales: {
                        x: {
                            stacked: true,
                            title: { display: true, text: 'Relationship' },
                            ticks: { maxRotation: 45, minRotation: 45 }
                        },
                        y: {
                            stacked: true,
                            beginAtZero: true,
                            max: 100,
                            title: { display: true, text: 'Percentage (%)' }
                        }
                    }
                }
            });

        }

});  // End DOMContentLoaded
</script>
</body>
</html>